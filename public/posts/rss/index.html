<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel><title><![CDATA[Caden Kraft]]></title><description><![CDATA[Some of my Projects]]></description><link>https://cadenkraft.com/</link><image><url>https://cadenkraft.com/favicon.avif</url><title>Caden Kraft</title><link>https://cadenkraft.com/</link></image><generator>Ghost 5.79</generator><lastBuildDate>Fri, 01 Mar 2024 22:27:22 GMT</lastBuildDate><atom:link href="https://cadenkraft.com/posts/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[3D Printed Dual Cycloidal Actuator]]></title><description><![CDATA[This project builds on my previous axial flux motor. To improve the torque output of the motor I designed a cycloidal gearbox that integrates into the current motor design allowing for more torque.]]></description><link>https://cadenkraft.com/3d-printed-dual-cycloidal-actuator/</link><guid isPermaLink="false">65d922ddf6e4040001065708</guid><category><![CDATA[Motors]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Fri, 23 Feb 2024 00:57:43 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2024/02/Title-Image.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2024/02/Title-Image.avif" alt="3D Printed Dual Cycloidal Actuator"><p>This project is a continuation of my previous axial flux motor project. If you&apos;ve not yet read that I would recommend doing so.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://cadenkraft.com/designing-a-coreless-axial-flux-motor-part-1/?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Ironless Axial Flux Motor</div><div class="kg-bookmark-description">After my first custom brushless motor I felt confident enough with the basic theory of how they work to make a second design with significantly more thought and math defining the design. Creating a 3D Printed Brushless MotorWith my work in the Iowa State Solar Car club I have learned</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://cadenkraft.com/content/images/2022/11/favicon.ico" alt="3D Printed Dual Cycloidal Actuator"><span class="kg-bookmark-author">Caden Kraft</span><span class="kg-bookmark-publisher">Caden Kraft</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://cadenkraft.com/content/images/2022/09/title-page-render-axial-flux-motor.16.avif" alt="3D Printed Dual Cycloidal Actuator"></div></a></figure><p>After I was finished with making my last motor project I was quite proud of the results. However, while the motor could achieve extremely high RPM&apos;s, this came at the cost of torque.</p><p>Originally I thought about rewinding the stator and possible improvements via stronger magnets and/or Iron based 3D printer filament for the stator coils among other things. </p><h2 id="deciding-on-a-gearbox">Deciding on a Gearbox</h2><p></p><p>Wanting to work on something a little more different than pure motor design and not wanting to rewind any coils, I set my sights on developing a gearbox that could be integrated into my current stator design. There were 3 primary options that I was looking into when deciding what gearbox that I was going to make, Planetary, Cycloidal, and Harmonic.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2024/02/cycloid1-1.gif" width="366" height="355" loading="lazy" alt="3D Printed Dual Cycloidal Actuator"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2024/02/HarmonicDriveAni-1.gif" width="700" height="700" loading="lazy" alt="3D Printed Dual Cycloidal Actuator" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/HarmonicDriveAni-1.gif 600w, https://cadenkraft.com/content/images/2024/02/HarmonicDriveAni-1.gif 700w"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2024/02/planetary.gif" width="300" height="332" loading="lazy" alt="3D Printed Dual Cycloidal Actuator"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Cycloidal (left), Harmonic (center), Planetary (right)</span></p></figcaption></figure><p>All of these options definitely seem like good ideas but I had to narrow down which one I was going to choose.</p><p>Planetary would have been the easiest and probably would have performed the best but I cut it out because I didn&apos;t really find it interesting enough and wanted to learn more about the other gearboxes. </p><p>While I admire the simplicity of the harmonic drive I was wary of my ability to manufacture the flexible parts needed. I eventually chose the cycloidal drive because it seemed like the biggest technical challenge to design as well as the fact that it looks extremely cool. Cycloidal gearboxes also have nearly no backlash which definitely made it stand out against something like a planetary gearbox with the tolerances of 3D printed parts.</p><h2 id="defining-project-requirements">Defining Project Requirements</h2><p></p><p>Now that I knew what gearbox I wanted to make I started to define what I wanted the final design to look like.</p><ul><li>Dual cycloidal drive to reduce vibrations</li><li>Integration of motor and gearbox into one assembly</li><li>70mm Z height restriction to keep a low profile</li><li>10:1 reduction</li><li>Easy assembly/disassembly (no adhesives)</li><li>Use existing stator design from axial flux motor</li></ul><h2 id="actuator-design">Actuator Design</h2><p></p><p>With my requirements set, I moved on to designing the actuator. The base motor design is based on my last axial flux motor so I began modifying that in order for it to fit a gearbox. Next I had to start work on the design of the cycloidal gearbox system itself. This was quite challenging to figure out initially because the cycloid geometry is fully defined off of parametric equations.</p><p><a href="https://blogs.solidworks.com/teacher/wp-content/uploads/sites/3/Building-a-Cycloidal-Drive-with-SOLIDWORKS.pdf?ref=10.0.0.222">This guide</a> was immensely helpful in defining the geometry. After some time I had the parameters for my parametric equations ready to go based on the size and reduction that I wanted. </p><table>
<thead>
<tr>
<th>Parameter</th>
<th>Variable</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Radius of rotor</td>
<td>$r$</td>
<td>67mm</td>
</tr>
<tr>
<td>Radius of rollers</td>
<td>$r_r$</td>
<td>4mm</td>
</tr>
<tr>
<td>Eccentricity</td>
<td>$e$</td>
<td>3mm</td>
</tr>
<tr>
<td>Number of rollers</td>
<td>$n$</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>$$\begin{equation}<br>
\small{x = {r}\cos(t) - r_r\cos(t + \psi) - {e}\cos(nt)}<br>
\end{equation}$$</p>
<p>$$\begin{equation}<br>
\small{y = -{r}\sin(t) + r_r\sin(t + \psi) + {e}\sin(nt)}<br>
\end{equation}$$</p>
<p>$$\begin{equation}<br>
\small{\psi = \arctan\left(\frac{\sin((1-n)t)}{\left(\frac{r}{e}\right) - \cos((1-n)t)}\right)}<br>
\end{equation}$$</p>
<p>I made an interactive graph on Desmos where you can visualize different cycloid designs quicker than you can in SOLIDWORKS.</p>
<!--kg-card-begin: html-->
<iframe src="https://www.desmos.com/calculator/ivmxq1dkn7?embed" width="80%" height="500" style="border: 1px solid #ccc" frameborder="0"></iframe>
<!--kg-card-end: html-->
<p>By plotting these parametric equations from $(0 &lt; t &lt; \pi)$ and mirroring the result I ended up with the final geometry needed for my cycloids.</p><p></p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Cycloid-result.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1730" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Cycloid-result.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Cycloid-result.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Cycloid-result.avif 1600w, https://cadenkraft.com/content/images/2024/02/Cycloid-result.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Design of dual cycloid geometry for the gearbox</span></figcaption></figure><p>As this design uses two cycloids they actually rotate in the same direction but have inverted eccentricity with the benefit being that a lot of the vibration is canceled out as the center of mass is roughly centered instead of spinning around. This does come at the expense of added complexity.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Cycloid-View.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Cycloid-View.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Cycloid-View.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Cycloid-View.avif 1600w, https://cadenkraft.com/content/images/2024/02/Cycloid-View.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Cycloid geometry integrated into actuator</span></figcaption></figure><p>Now it was time to finally integrate everything together into one cohesive design. One challenge I faced during this process was the admittedly arbitrary height limit that I gave myself. </p><p>There were a lot of design revisions in order to get all of the parts to fit in the allotted space. Below is an image showing a cross section of the final design with the plastic 3D printed components highlighted.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Section-View.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1408" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Section-View.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Section-View.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Section-View.avif 1600w, https://cadenkraft.com/content/images/2024/02/Section-View.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Section view of the final gearbox design</span></figcaption></figure><p>As you can see above there are some very tight gaps between a lot of the moving parts inside the gearbox as a result of needing to fit in this Z constraint. Below is an image that should give a better idea of how the motor and gearbox were integrated into a single assembly.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Motor-and-Gearbox-Separated-3-With-Labels.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1730" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Motor-and-Gearbox-Separated-3-With-Labels.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Motor-and-Gearbox-Separated-3-With-Labels.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Motor-and-Gearbox-Separated-3-With-Labels.avif 1600w, https://cadenkraft.com/content/images/2024/02/Motor-and-Gearbox-Separated-3-With-Labels.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Labeled view of the motor and gearbox separated</span></figcaption></figure><p>Once I was done combining the gearbox and motor I landed on this final design</p><h2 id="final-design-renders">Final Design Renders</h2><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Finished-Design.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1125" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Finished-Design.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Finished-Design.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Finished-Design.avif 1600w, https://cadenkraft.com/content/images/2024/02/Finished-Design.avif 2000w" sizes="(min-width: 1200px) 1200px"><figcaption><span style="white-space: pre-wrap;">Renders of the final design</span></figcaption></figure><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Cycloidial-Gearbox-Exploded-Horizontal.26.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Cycloidial-Gearbox-Exploded-Horizontal.26.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Cycloidial-Gearbox-Exploded-Horizontal.26.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Cycloidial-Gearbox-Exploded-Horizontal.26.avif 1600w, https://cadenkraft.com/content/images/2024/02/Cycloidial-Gearbox-Exploded-Horizontal.26.avif 2000w" sizes="(min-width: 1200px) 1200px"><figcaption><span style="white-space: pre-wrap;">Explosion view of final design</span></figcaption></figure><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Horizontal-Explosion.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Horizontal-Explosion.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Horizontal-Explosion.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Horizontal-Explosion.avif 1600w, https://cadenkraft.com/content/images/2024/02/Horizontal-Explosion.avif 2000w" sizes="(min-width: 1200px) 1200px"><figcaption><span style="white-space: pre-wrap;">Horizontal explosion view</span></figcaption></figure><h2 id="manufacturing-and-assembly">Manufacturing and Assembly</h2><p></p><p>When it came to actually manufacturing the design I had to go through quite a few prototype parts before I landed on the final geometry. There was a lot of friction problems with so many parts tightly packed together moving at high speeds so a lot of incremental improvements had to be made. Below is a picture of all the failed parts that didn&apos;t make it into the project.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/02/Failed-parts.avif" class="kg-image" alt="3D Printed Dual Cycloidal Actuator" loading="lazy" width="2000" height="1241" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Failed-parts.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Failed-parts.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Failed-parts.avif 1600w, https://cadenkraft.com/content/images/2024/02/Failed-parts.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">All the failed prototype parts</span></figcaption></figure><p>However, when I finally did figure out all the issues I was able to assemble and test the actuator. Here are some photos of what the final design looks like assembled.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2024/02/Gearbox-Back-2.avif" width="2000" height="1500" loading="lazy" alt="3D Printed Dual Cycloidal Actuator" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Gearbox-Back-2.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Gearbox-Back-2.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Gearbox-Back-2.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2024/02/Gearbox-Back-2.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2024/02/Gearbox-Front-1.avif" width="2000" height="2000" loading="lazy" alt="3D Printed Dual Cycloidal Actuator" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Gearbox-Front-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Gearbox-Front-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Gearbox-Front-1.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2024/02/Gearbox-Front-1.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2024/02/Gearbox-Side.avif" width="2000" height="1500" loading="lazy" alt="3D Printed Dual Cycloidal Actuator" srcset="https://cadenkraft.com/content/images/size/w600/2024/02/Gearbox-Side.avif 600w, https://cadenkraft.com/content/images/size/w1000/2024/02/Gearbox-Side.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2024/02/Gearbox-Side.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2024/02/Gearbox-Side.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Different views of the actuator</span></p></figcaption></figure><h2 id="testing">Testing</h2><p></p><p>Unfortunately I don&apos;t currently have access to a dynamometer to do a proper torque test. If I am able to access one I will update this post in the future with the results. Below is a video of me running the actuator on my bench.</p><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/Glw9GQPJTQM?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen title="3D Printed Dual Cycloidal Actuator Test"></iframe></figure><p>I also took a video with the top components removed so you are able to see the cycloids in action.</p><figure class="kg-card kg-embed-card"><iframe width="200" height="113" src="https://www.youtube.com/embed/r_5Vqms3LP4?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen title="3D Printed Dual Cycloidal Drive Exposed Test"></iframe></figure><p>My general impressions of it are fairly positive as when it&apos;s drawing around ~60W I am unable to stop the output with my hand like I easily could on the previous motor. This combined with the cycloidal nature of the gearbox I cannot feel any backlash whatsoever.</p><h2 id="conclusion">Conclusion</h2><p></p><p>I really enjoyed working on this project as it is a culmination of many of the projects I&apos;ve posted here over the past few years. Being able to take some wire, magnets, and plastic and assemble them in such a way where they generate rotation with enough torque that even I can&apos;t easily stop it is a pretty cool feeling and I am pretty proud of how it turned out. </p><p>One area that could be improved is the base torque of the motor. Even just reprinting the stator in Iron PLA would yield a higher torque with zero change to the design. </p><p>The other area that this actuator suffers in is friction. With the two cycloids spinning around inside the casing there is more rubbing and friction than I initially intended and I think this could be fixed by either only using a single cycloid or making the actuator taller.</p><p>I also wish I was able to do more empirical testing on the motor so I could properly characterize its performance but that may have to be a project for another day.</p><p>If you enjoyed this project check out some of my other projects that I have completed below!</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Solar Car HV Bus Bar Distribution]]></title><description><![CDATA[I designed a high voltage distribution assembly for the solar car that centralizes all of our high voltage connections, contactors, and fuses into a centralized location. ]]></description><link>https://cadenkraft.com/solar-car-hv-bus-bar-distribution/</link><guid isPermaLink="false">65d922ddf6e4040001065707</guid><category><![CDATA[Solar Car]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Thu, 13 Jul 2023 01:42:50 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2023/07/untitled.6.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2023/07/untitled.6.avif" alt="Solar Car HV Bus Bar Distribution"><p>As I&apos;ve continued working on the Iowa State Solar Car team one problem on our current car I have noticed is how we handle routing the high voltage connections in our battery pack. This project aims to create a design that consolidates our HV connections and makes maintenance significantly easier.</p><h2 id="the-current-problem">The current problem</h2><p></p><p>As you can see below, currently we have a mess of 1/0 gauge wire sprawling between countless contactors, fuses, current sensors, and connectors. This network of wire is used for connecting our battery pack to our motors, chargers, solar array, and LV systems. What we currently have is a nightmare to work with and makes seemingly simple tasks such as changing fuses an hour long ordeal.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/p15.avif" width="2000" height="1500" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/p15.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/p15.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/p15.avif 1600w, https://cadenkraft.com/content/images/2023/07/p15.avif 2000w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/High-Voltage-Mess.avif" width="1585" height="2019" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/High-Voltage-Mess.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/High-Voltage-Mess.avif 1000w, https://cadenkraft.com/content/images/2023/07/High-Voltage-Mess.avif 1585w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Current Solar Car, P15 Eliana (left), Current HV Dumpster Fire (Right)</span></p></figcaption></figure><p>The main reason that our current setup is such a mess is because the American Solar Challenge regulations require contactors and fuses at most points through the HV chain leading to many breaks between wires. We also have a problem where the specialty fuses we have to buy do not have fuse holders available so we have to put them inline in a wire as seen above.</p><h2 id="solution-requirements">Solution Requirements</h2><p></p><p>Below are the requirements I came up with for the design of the HV bussing solution.</p><ul><li>No doubling up cables on a single screw terminal</li><li>Properly sized lugs and wire gauge based on the connection</li><li>Captive, clinched, or crimped nuts for the bolted connections</li><li>Dedicated holders for all current sensors and fuses</li><li>Automotive grade panel mount connectors</li><li>Use bus bars over cables whenever possible</li><li>Integrated Compact Design</li></ul><p>One of the challenges with creating a design for this was deciding on contactors, fuses, and current sensors. Below is what I decided on.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/MFG_Littelfuse_Fuses_526_ISO.avif" width="640" height="640" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/MFG_Littelfuse_Fuses_526_ISO.avif 600w, https://cadenkraft.com/content/images/2023/07/MFG_Littelfuse_Fuses_526_ISO.avif 640w"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/Edison-TJN-100.avif" width="1000" height="1000" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/Edison-TJN-100.avif 600w, https://cadenkraft.com/content/images/2023/07/Edison-TJN-100.avif 1000w" sizes="(min-width: 720px) 720px"></div></div><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/MFG_SSA-Series.avif" width="640" height="640" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/MFG_SSA-Series.avif 600w, https://cadenkraft.com/content/images/2023/07/MFG_SSA-Series.avif 640w"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/Kilovac-EV200.avif" width="280" height="210" loading="lazy" alt="Solar Car HV Bus Bar Distribution"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Littlefuse 526 Series (Motors, Array, Charging) TL, Edison TJN-100 (Main) TR, Riedon SSA-250 Current Sense BL, Kilovac EV200 Contactor BR</span></p></figcaption></figure><p>Out of all these the 15-50a fuses were definitely the hardest to find as I wanted all of these fuses to have the same form factor and be able to mount via bolted joint. The Littlefuse 526 series is the only one online that is able to meet these requirements and it just so happens to be designed specifically for electric vehicles.</p><p>Below is the design that I came up with for the final bus bar network.</p><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/07/PrISUm-HV-Ancillary.8.avif" class="kg-image" alt="Solar Car HV Bus Bar Distribution" loading="lazy" width="2000" height="1365" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/PrISUm-HV-Ancillary.8.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/PrISUm-HV-Ancillary.8.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/PrISUm-HV-Ancillary.8.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/07/PrISUm-HV-Ancillary.8.avif 2400w" sizes="(min-width: 1200px) 1200px"><figcaption><span style="white-space: pre-wrap;">Labeled diagram of the final assembly</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/07/untitled.7.avif" class="kg-image" alt="Solar Car HV Bus Bar Distribution" loading="lazy" width="2000" height="1365" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/untitled.7.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/untitled.7.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/untitled.7.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/07/untitled.7.avif 2400w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">View of the bus bar layout</span></figcaption></figure><figure class="kg-card kg-image-card kg-width-full kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/07/PrISUm-HV-Ancillary-Exploded.10.avif" class="kg-image" alt="Solar Car HV Bus Bar Distribution" loading="lazy" width="2000" height="1365" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/PrISUm-HV-Ancillary-Exploded.10.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/PrISUm-HV-Ancillary-Exploded.10.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/PrISUm-HV-Ancillary-Exploded.10.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/07/PrISUm-HV-Ancillary-Exploded.10.avif 2400w"><figcaption><span style="white-space: pre-wrap;">Exploded view of the assembly</span></figcaption></figure><h2 id="assembly">Assembly</h2><p></p><p>For the assembly I chose to use clinch nuts on the copper that allow for the nuts to be embedded into the bus bars and reduce the need for you to use a wrench on each side to tighten the fuses in place.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/20230707_190930.avif" width="1868" height="4000" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/20230707_190930.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/20230707_190930.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/20230707_190930.avif 1600w, https://cadenkraft.com/content/images/2023/07/20230707_190930.avif 1868w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/20230707_194246.avif" width="1868" height="4000" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/20230707_194246.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/20230707_194246.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/20230707_194246.avif 1600w, https://cadenkraft.com/content/images/2023/07/20230707_194246.avif 1868w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/07/20230707_201917.avif" width="1868" height="4000" loading="lazy" alt="Solar Car HV Bus Bar Distribution" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/20230707_201917.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/20230707_201917.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/20230707_201917.avif 1600w, https://cadenkraft.com/content/images/2023/07/20230707_201917.avif 1868w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">All the waterjet components as well as clinch nut installation</span></p></figcaption></figure><p>For the tray I designed it to be 3D printed in two parts out of PETG. There is a M3 Heat-set insert and datum pin for each bus bar to keep everything aligned as well as walls between all the bus bars to prevent shorting. As metric hardware is something we don&apos;t use fairly often I also included the allen key and socket sizes needed to do repairs embossed into the print.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/07/bus-bar-tray.avif" class="kg-image" alt="Solar Car HV Bus Bar Distribution" loading="lazy" width="2000" height="934" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/bus-bar-tray.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/bus-bar-tray.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/bus-bar-tray.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/07/bus-bar-tray.avif 2400w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">3D printed shell with brass inserts</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/07/tray-with-bus-bars.avif" class="kg-image" alt="Solar Car HV Bus Bar Distribution" loading="lazy" width="2000" height="934" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/tray-with-bus-bars.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/tray-with-bus-bars.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/tray-with-bus-bars.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/07/tray-with-bus-bars.avif 2400w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Tray with bus bars inserted</span></figcaption></figure><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/07/Final-Assembly.avif" class="kg-image" alt="Solar Car HV Bus Bar Distribution" loading="lazy" width="2000" height="934" srcset="https://cadenkraft.com/content/images/size/w600/2023/07/Final-Assembly.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/07/Final-Assembly.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/07/Final-Assembly.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/07/Final-Assembly.avif 2400w" sizes="(min-width: 1200px) 1200px"><figcaption><span style="white-space: pre-wrap;">Final fully complete assembly</span></figcaption></figure><p>In its current state it is nearly done but is still waiting on the current sensor as well as routing all the wires and hooking it up into our battery pack. I think it should work well and will be the standard for our team&apos;s battery pack design moving forward.</p><h2 id="conclusion">Conclusion</h2><p></p><p>Overall I really enjoyed this project and am glad that it greatly simplifies the design of our battery pack. I used quite a few CAD techniques I hadn&apos;t before to model the bus bars and tray. I am quite proud of how everything turned out as all the parts went together perfectly and the final design ended up being pretty clean.</p><p>To see some of the other solar car work that I&apos;ve done as well as my other projects click the links below.</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[The NTPixie, A WiFi Nixie Tube Clock]]></title><description><![CDATA[I've always wanted to make a nixie tube clock but wanted to make one that I could trust was accurate. This was done through syncing the time with NTP servers the same way phones and computers do.]]></description><link>https://cadenkraft.com/the-ntpixie-a-wifi-connected-nixie-tube-clock/</link><guid isPermaLink="false">65d922ddf6e4040001065706</guid><category><![CDATA[Coding]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Wed, 17 May 2023 23:17:00 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2023/06/nixie-tube-clock-render.3.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2023/06/nixie-tube-clock-render.3.avif" alt="The NTPixie, A WiFi Nixie Tube Clock"><p>I have always thought that nixie tubes are one of the coolest inventions ever made. The novelty of having such an intricate assembly of blown glass and spot welded numbers just to simply display digits is something I&apos;ve always admired. </p><h2 id="whats-a-nixie-tube">What&apos;s a Nixie Tube?</h2><p></p><p>Before the invention of the LED or the seven segment display, engineers needed a device capable of displaying digits for things like voltmeters, multimeters, and frequency counters.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/in18-nixie.avif" width="1080" height="1080" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/in18-nixie.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/in18-nixie.avif 1000w, https://cadenkraft.com/content/images/2023/06/in18-nixie.avif 1080w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/broken-nixie.avif" width="220" height="215" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/Nixie2-1.gif" width="200" height="200" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">IN-18 Nixie (left), Broken GN-4 (center), GN-4 Cycling through digits (right)</span></p></figcaption></figure><p>To solve this problem Engineers in the USSR created nixie tubes which were made of 10 digits encased in blown glass that was sealed with Neon gas. The tubes have a wire mesh anode with multiple digits acting as the cathodes. When voltage is applied across the two the Neon gas directly around the digit glows.</p><h2 id="project-requirements">Project Requirements</h2><p></p><p>I&apos;ve looked into simply purchasing a nixie tube clock in the past but there were always a few key wants that I had for a clock that could not be found in available models online.</p><p>The project requirements I&apos;ve set for this clock are listed below.</p><ul><li>6 Digits in order to display seconds</li><li>Neon bulb colons between the hours, minutes, and seconds</li><li>WiFi, or atomic capability to have a perfect synchronized time</li></ul><p>I decided to use the IN-12 nixie tube due to its relatively low cost and the horizontal mounting making them ideal for the design I had in mind.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/06/in12.avif" class="kg-image" alt="The NTPixie, A WiFi Nixie Tube Clock" loading="lazy" width="1500" height="1500" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/in12.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/in12.avif 1000w, https://cadenkraft.com/content/images/2023/06/in12.avif 1500w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">IN-12 Nixie Tube</span></figcaption></figure><p>For the time accuracy I decided on using the Raspberry Pi Pico W and using the WiFi capability to sync to NTP time servers.</p><h2 id="design">Design</h2><p></p><p>For the design I started on the PCB side of things as that is what I was less familiar with. To drive the nixie tubes I decided on using the <a href="https://tubehobby.com/datasheets/k155id1.pdf?ref=10.0.0.222">K155ID1</a> nixie tube driver. For the power supply I decided on using the <a href="https://omnixie.com/collections/featured-products/products/nch8200hv-nixie-hv-power-module?ref=10.0.0.222">NCH8200HV</a>. Finally, for the colons I decided on using NE-2 bulbs. </p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/k155id1.avif" width="400" height="300" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/nch8200hv.avif" width="445" height="446" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/ne2-bulb.avif" width="169" height="300" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">K155ID1 (left), NCH8200HV (center), NE-2 bulb (right)</span></p></figcaption></figure><p>After a few design revisions this is the final PCB and schematic that I came up with.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/schematic2.avif" width="1628" height="1128" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/schematic2.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/schematic2.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/schematic2.avif 1600w, https://cadenkraft.com/content/images/2023/06/schematic2.avif 1628w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/pcb-screenshot.avif" width="1815" height="1193" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/pcb-screenshot.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/pcb-screenshot.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/pcb-screenshot.avif 1600w, https://cadenkraft.com/content/images/2023/06/pcb-screenshot.avif 1815w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/Screenshot-2023-03-27-231411.avif" width="924" height="927" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/Screenshot-2023-03-27-231411.avif 600w, https://cadenkraft.com/content/images/2023/06/Screenshot-2023-03-27-231411.avif 924w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Schematic (left), PCB layout (center), 3D View (right)</span></p></figcaption></figure><p>To save cost on ordering the PCB I decided to design it to be snapped in half and then both pieces stacked on top of each other connected via B2B connectors.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/06/soldered-PCB-picture.avif" class="kg-image" alt="The NTPixie, A WiFi Nixie Tube Clock" loading="lazy" width="1173" height="500" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/soldered-PCB-picture.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/soldered-PCB-picture.avif 1000w, https://cadenkraft.com/content/images/2023/06/soldered-PCB-picture.avif 1173w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Soldered Assembly</span></figcaption></figure><p>As for the design of the case, I was originally thinking of making a wooden case but did not have a wood shop at my disposal so I decided on making a clear resin SLA enclosure to sell the retro N64 look. The final case design I came up with is below.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2023/06/Nixie-tube-case.avif" class="kg-image" alt="The NTPixie, A WiFi Nixie Tube Clock" loading="lazy" width="1641" height="982" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/Nixie-tube-case.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/Nixie-tube-case.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/Nixie-tube-case.avif 1600w, https://cadenkraft.com/content/images/2023/06/Nixie-tube-case.avif 1641w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Final Case Design</span></figcaption></figure><h2 id="firmware">Firmware</h2><p></p><p>For this project I decided to use MicroPython on the Pico as it has more documentation and support online for this type of project. Below is the code I wrote for the firmware running on the clock.</p><figure class="kg-card kg-code-card"><pre><code class="language-python">import network
import ntptime
from machine import Pin, Timer
from time import localtime, sleep, time

# Define the pins for each nixie tube

nixie_pins = [
    [6, 4, 5, 7],  # nixie tube 1
    [22, 20, 21, 28],  # nixie tube 2
    [2, 0, 1, 3],  # nixie tube 3
    [18, 16, 17, 19],  # nixie tube 4
    [10, 8, 9, 11],  # nixie tube 5
    [14, 12, 13, 15]  # nixie tube 6
]

colon_pin_1 = Pin(26, Pin.OUT)
colon_pin_2 = Pin(27, Pin.OUT)

# Define the lookup table for digit to binary conversion
digit_to_binary = {
    0: [0, 0, 0, 0],
    1: [0, 0, 0, 1],
    2: [0, 0, 1, 0],
    3: [0, 0, 1, 1],
    4: [0, 1, 0, 0],
    5: [0, 1, 0, 1],
    6: [0, 1, 1, 0],
    7: [0, 1, 1, 1],
    8: [1, 0, 0, 0],
    9: [1, 0, 0, 1]
}

# Connect to Wi-Fi
sta_if = network.WLAN(network.STA_IF)
sta_if.active(True)
sta_if.connect(&quot;WIFI_SSID_HERE&quot;, &quot;WIFI_PASSCODE_HERE&quot;)
while not sta_if.isconnected():
    pass

# Set up the pins for each nixie tube
nixie_tubes = []
for pins in nixie_pins:
    nixie_tube = []
    for pin in pins:
        nixie_tube.append(Pin(pin, Pin.OUT))
    nixie_tubes.append(nixie_tube)
    #print(nixie_tubes)

# Set up a timer to update the display every second
timer = Timer(-1)

ntptime.settime()
# Define a function to update the display
def update_display(timer):
    # Get the current time from the NTP server
    print(time())
    current_time = localtime()
    # Apply the UTC offset (in seconds)
    seconds_offset = 0 #using https://time.is
    utc_offset = -5 * 60 * 60 - seconds_offset # for example, 1 hour ahead of UTC
    # -5 = CST -7 = PST 
    current_time = localtime(time() + utc_offset)
    if current_time[4]==10 and current_time[5]==10:
        ntptime.settime()
        print(&quot;NTP SYNC&quot;)
    if current_time[3]&gt;12:
        twelve_hour_time = current_time[3]-12
    else:
        twelve_hour_time = current_time[3]
    #print(current_time)
    #print(twelve_hour_time)
    # Convert the time to digits
    digits = [
        twelve_hour_time // 10,  # hour tens
        twelve_hour_time % 10,  # hour ones
        current_time[4] // 10,  # minute tens
        current_time[4] % 10,  # minute ones
        current_time[5] // 10,  # second tens
        current_time[5] % 10   # second ones
    ]

# Code below is to cycle less common digits to in order to prevent leaking this section should be reworked some day

    if current_time[3]==3 and current_time[4]==0:
        digits = [0,0,0,0,0,0]
    elif current_time[3]==3 and current_time[4]==1:
        digits = [1,1,1,1,1,1]
    elif current_time[3]==3 and current_time[4]==2:
        digits = [2,2,2,2,2,2]
    elif current_time[3]==3 and current_time[4]==3:
        digits = [3,3,3,3,3,3]
    elif current_time[3]==3 and current_time[4]==4:
        digits = [4,4,4,4,4,4]
    elif current_time[3]==3 and current_time[4]==5:
        digits = [5,5,5,5,5,5]
    elif current_time[3]==3 and current_time[4]==6:
        digits = [6,6,6,6,6,6]
    elif current_time[3]==3 and current_time[4]==7:
        digits = [7,7,7,7,7,7]
    elif current_time[3]==3 and current_time[4]==8:
        digits = [8,8,8,8,8,8]
    elif current_time[3]==3 and current_time[4]==9:
        digits = [9,9,9,9,9,9]
        
    print(digits)
    # Convert the digits to binary and display them on the nixie tubes
    for i in range(6):
        binary = digit_to_binary[digits[i]]
        for j in range(4):
            nixie_tubes[i][j].value(binary[j])
    colon_pin_1.value(1)
    colon_pin_2.value(1)
    sleep(0.5)
    colon_pin_1.value(0)
    colon_pin_2.value(0)

# Start the timer
timer.init(period=1000, mode=Timer.PERIODIC, callback=update_display)

# Put the device to sleep to save power
while True:
    sleep(1)  # can be interrupted by timer events
</code></pre><figcaption><p><span style="white-space: pre-wrap;">Input WiFi SSID, password, and timezone for this code to run</span></p></figcaption></figure><h2 id="final-assembly">Final Assembly</h2><p></p><p>Below are renders and pictures of the final design up and running.</p><figure class="kg-card kg-image-card kg-width-wide"><img src="https://cadenkraft.com/content/images/2023/06/nixie-tube-clock-render-explosion.4.avif" class="kg-image" alt="The NTPixie, A WiFi Nixie Tube Clock" loading="lazy" width="2000" height="1365" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/nixie-tube-clock-render-explosion.4.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/nixie-tube-clock-render-explosion.4.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/nixie-tube-clock-render-explosion.4.avif 1600w, https://cadenkraft.com/content/images/2023/06/nixie-tube-clock-render-explosion.4.avif 2000w" sizes="(min-width: 1200px) 1200px"></figure><figure class="kg-card kg-image-card kg-width-wide"><img src="https://cadenkraft.com/content/images/2023/06/nixie-tube-clock-render-explosion.5.avif" class="kg-image" alt="The NTPixie, A WiFi Nixie Tube Clock" loading="lazy" width="2000" height="1365" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/nixie-tube-clock-render-explosion.5.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/nixie-tube-clock-render-explosion.5.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/nixie-tube-clock-render-explosion.5.avif 1600w, https://cadenkraft.com/content/images/2023/06/nixie-tube-clock-render-explosion.5.avif 2000w" sizes="(min-width: 1200px) 1200px"></figure><p>You can see an orbital view of the design by dragging on the model below.</p>
<!--kg-card-begin: html-->
<div style="max-width: 1752px; max-height: 1196px;">
  <div style="left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 64.3305%; overflow: hidden;">
    <iframe src="https://cadenkraft.com/content/renders/nixie_render.html" allowfullscreen style="position: absolute; top: 0px; left: 0px; height: 100%; width: 1px; min-width: 100%; *width: 100%;" frameborder="0" scrolling="no">
    </iframe>
  </div>
</div>
<!--kg-card-end: html-->
<hr><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/20230630_125703.avif" width="2000" height="1500" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/20230630_125703.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/20230630_125703.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/20230630_125703.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/06/20230630_125703.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/20230630_130147.avif" width="2000" height="934" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/20230630_130147.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/20230630_130147.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/20230630_130147.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/06/20230630_130147.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/06/20230630_130356.avif" width="2000" height="934" loading="lazy" alt="The NTPixie, A WiFi Nixie Tube Clock" srcset="https://cadenkraft.com/content/images/size/w600/2023/06/20230630_130356.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/06/20230630_130356.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/06/20230630_130356.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/06/20230630_130356.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Finished photos of the clock</span></p></figcaption></figure><h2 id="conclusions">Conclusions</h2><p></p><p>I have been using it on my bedside for the past few weeks now and it has kept time perfectly and I haven&apos;t yet noticed any major issues. One issue I am running into is that two of the four bulbs on the colons don&apos;t seem to light up consistently. I&apos;ve read online about needing time for the bulbs to polarize and as they do turn on some of the time I think that&apos;s what the problem is. </p><p>This has been one of my favorite projects because it was very interdisciplinary in the amount of skills that I had to use in order to complete it. Second, thanks mostly to the superb quality of the SLA print (plus 2 coats of <a href="https://www.amazon.com/Rust-Oleum-7701830-Stops-12-Ounce-Crystal/dp/B0010NY95S/ref=sr_1_10?keywords=rustoleum+clear+coat&amp;qid=1688166688&amp;sr=8-10&amp;ref=10.0.0.222">Rust-Oleum Crystal Clear Enamel</a>), this project looks the most polished and least DIY out of anything I&apos;ve ever done. This clock allowed me to hone in on my PCB design skills and I hope I can use them more on future projects.</p><p>Thanks for reading, please check out some of my other posts below!</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Ironless Axial Flux Motor]]></title><description><![CDATA[Building off my first motor project, I designed and tested an axial flux motor by mathematically calculating all of the motor parameters needed to meet the design requirements that I set.]]></description><link>https://cadenkraft.com/designing-a-coreless-axial-flux-motor-part-1/</link><guid isPermaLink="false">65d922ddf6e4040001065704</guid><category><![CDATA[Motors]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Fri, 09 Sep 2022 04:39:12 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2022/09/title-page-render-axial-flux-motor.16.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2022/09/title-page-render-axial-flux-motor.16.avif" alt="Ironless Axial Flux Motor"><p>After my first custom brushless motor I felt confident enough with the basic theory of how they work to make a second design with significantly more thought and math defining the design. </p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://cadenkraft.com/creating-a-3d-printed-brushless-motor/?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Creating a 3D Printed Brushless Motor</div><div class="kg-bookmark-description">With my work in the Iowa State Solar Car club I have learned so many things about so many different technologies that I have not had the chance of working with before. One of the things that has come to interest me the most are motors. Getting the chance to</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://cadenkraft.com/content/images/size/w256h256/2022/02/portfolio-circle.avif" alt="Ironless Axial Flux Motor"><span class="kg-bookmark-author">Caden Kraft</span><span class="kg-bookmark-publisher">Caden Kraft</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://cadenkraft.com/content/images/2022/07/motor-title-render.14.avif" alt="Ironless Axial Flux Motor"></div></a></figure><p>As my first design was made by looking at images online and implementing dimensions based on what looked right I found that there were some serious inefficiencies that could be remedied with a bit of math.</p><h2 id="why-axial-flux">Why Axial Flux?</h2><p></p><p>One of the main reasons that I chose to use an axial flux motor design was because the air gap between the magnets and the coils is more or less two dimensional. As opposed to a traditional radial flux motor this allows me to adjust the air gap with shims instead of redesigning the rotor every time to adjust it.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/radial-flux-vs-axial-flux.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="658" height="343" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/radial-flux-vs-axial-flux.avif 600w, https://cadenkraft.com/content/images/2022/09/radial-flux-vs-axial-flux.avif 658w"><figcaption><span style="white-space: pre-wrap;">Axial Flux (left), Radial Flux (right)</span></figcaption></figure><p>Another benefit to this design is that because this is a DIY project I do not have the budget to order the custom magnets with a bend for a radial flux rotor.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/radial-flux-magnets.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="800" height="600" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/radial-flux-magnets.avif 600w, https://cadenkraft.com/content/images/2022/09/radial-flux-magnets.avif 800w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Magnets traditionally used in radial flux motor</span></figcaption></figure><p>The flat nature of an axial flux motor allows me to use traditional rectangular bar magnets that can be found cheaply online in large quantities without the need to have them custom made.</p><h2 id="coreless-design-and-halbach-array">Coreless Design and Halbach Array</h2><p></p><p>Similarly to the magnets, due to cost constraints for this project and the manufacturing capability that I currently have in my college apartment, I am not able to custom make ferrite or steel laminate ferrous cores inside the coils. </p><p>As a ferrous core is extremely important in shaping the magnetic field around the coils, I had to research a different solution to remedy this and came across the Halbach magnet array. This works by alternating the magnet poles by 90 degrees at a time instead of 180 degrees like normal designs.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/Halbach-Array-vs-Alt-Pol.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="400" height="414"><figcaption><span style="white-space: pre-wrap;">Halbach Array (top), Alternating Array (bottom)</span></figcaption></figure><p>This uses extra magnets to shape the magnetic field as a iron core traditionally would. As there are very little designs on the internet that I could find the utilize a Halbach pattern I chose to implement it into my design to hopefully contribute some experience implementing it into a motor once the design is completed.</p><p>This means that while the rotor of my motor has 12 poles it actually utilizes 24 magnets to implement the Halbach design.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/halbach-array.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="400" height="253"><figcaption><span style="white-space: pre-wrap;">Example of Halbach array pattern</span></figcaption></figure><h2 id="defining-specifications">Defining Specifications</h2><p></p><p>Next I had to define a few specifications around various aspects of the motor needed to calculate the number of coil turns needed for the final design. </p><p>I found an excellent research paper online that outlined the mathematical parameters needed to successfully create a Halbach axial flux design.</p><figure class="kg-card kg-bookmark-card kg-card-hascaption"><a class="kg-bookmark-container" href="https://www.semanticscholar.org/paper/Paper-088-%2C-ENG-xxx-Design-and-Test-of-an-Ironless-Batzel-Skraba/96e7cbb78f65cbfa8df6c1b3a050aeac3c1bbd05?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">[PDF] Paper 088 , ENG-xxx Design and Test of an Ironless Axial Flux Permanent Magnet Machine using Halbach Array | Semantic Scholar</div><div class="kg-bookmark-description">Conventional permanent magnet electric machines utilize ferromagnetic cores of high permeability. The high core permeability relative to the surrounding material helps to concentrate the magnetic flux in the core, and guide the flux across the airgap of the machine. An ironless machine design remove&#x2026;</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://cdn.semanticscholar.org/953b8efbde4e5220/img/mstile-310x310.avif" alt="Ironless Axial Flux Motor"><span class="kg-bookmark-author">Semantic ScholarSemantic Scholar&apos;s Logo</span><span class="kg-bookmark-publisher">T. Batzel</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://www.semanticscholar.org/img/semantic_scholar_og.avif" alt="Ironless Axial Flux Motor"></div></a><figcaption><p><span style="white-space: pre-wrap;">Design and Test of an Ironless Axial Flux Permanent Magnet Machine using Halbach Array</span></p></figcaption></figure><p>Through this paper and some preliminary CAD design as well as a quick inventory of all of the motor controllers and bearings that I had already, I was able to define certain parameters needed to calculate the coil turns below.</p><table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>DC Bus Voltage</td>
<td>24 V</td>
</tr>
<tr>
<td>Base Speed</td>
<td>700 rpm</td>
</tr>
<tr>
<td>Rated Current</td>
<td>7 A (rms)</td>
</tr>
<tr>
<td>Wire Diameter</td>
<td>0.65 mm</td>
</tr>
<tr>
<td>Poles</td>
<td>12</td>
</tr>
<tr>
<td>Coils</td>
<td>18</td>
</tr>
<tr>
<td>Connection</td>
<td>Star (Y connection)</td>
</tr>
<tr>
<td>Coil Area ($A_{coil}$)</td>
<td>4.92*10<sup>-4</sup> m<sup>2</sup></td>
</tr>
<tr>
<td>Outer Radius ($r_o$)</td>
<td>65 mm</td>
</tr>
<tr>
<td>Inner Radius ($r_i$)</td>
<td>35 mm</td>
</tr>
<tr>
<td>Magnetic Flux Density ($B$)</td>
<td>0.5 Tesla</td>
</tr>
</tbody>
</table>
<p>I chose for the motor to have 12 poles and 18 coils as it has an efficient high winding factor.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/motor-winding.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="696" height="838" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/motor-winding.avif 600w, https://cadenkraft.com/content/images/2022/09/motor-winding.avif 696w"><figcaption><span style="white-space: pre-wrap;">Winding Factor from Bavaria Direct Online Calculator</span></figcaption></figure><h2 id="calculating-parameters">Calculating Parameters</h2><p></p><p>The first step in defining the coil turns needed is calculating the area of the motor that is covered by the coils.</p><p>$$\small{A_{rotor}=\pi (({r_0}^{2})-({r_i}{r_i}))}$$</p>
<p>Next, I needed to define an optimal outer to inner radius ratio in order to maximize the efficiency of the motor. As the paper above says, an optimal ratio for this is around 0.5. This allowed me to define the inner and outer radius based on the 36mm*6mm*6mm magnets that I found online.</p><p>$$\small{\alpha=\frac{r_i}{r_o}}$$</p>
<p>Then I had to calculate the peak flux density using the equation below as well as the recommended mean air gap flux density of 0.5 Tesla from the paper above.</p><p>$$\small{\tau=\frac{F}{A_{rotor}}=\frac{Bli}{lw}=\frac{Bi}{w}=BZ}$$</p>
<p>$$\small{B=\frac{2B_m}{\pi}}$$</p>
<p>After using these two equations I arrived at a mean air gap flux density of 0.785 Tesla. Using the next couple equations I was able to use this value combined with others above to figure out the final number of coil turns. </p><p>$$\small{e_{ph}=N_{ph}A_{coil}\frac{dB(\theta)}{dt}}$$</p>
<p>$$\small{B(\theta)=B_m\sin{{(\omega}_et)}}$$</p>
<p>$$\small{e_{ph}=N_{ph}A_{coil}\omega_eB_m\cos{(\omega_et)}}$$</p>
<p>$$\small{N_{ph}=\frac{e_{ph}}{A_{coil}\omega_eB_m}}$$</p>
<p>The electrical frequency of the stator voltage can be determined using the shaft speed and number of pole pairs.</p><p>$$\small{{\omega_e}=\frac{700\ rpm}{60\ s}\cdot2\pi\cdot6}$$</p>
<p>Plugging in the final numbers into the equation below equates to about ~87 coils per phase of the motor.</p><p>$$\small{N_{ph}=\frac{\frac{24\ V}{\sqrt3}}{4.92\cdot{10}^{-4}\cdot\frac{700\ rpm}{60\ s}{2\pi}\cdot{6}\cdot{0.785\ T}}}$$</p>
<p>$$\small{N_{ph}=81.57}$$</p>
<p>Dividing this by six as there are 6 coils per phase it equates to around 14 turns per coil.</p><h2 id="finalizing-the-design">Finalizing the Design</h2><p></p><p>Now that I had the parameters defined I started work on creating the final design. The final design will consist of mostly 3D printed parts and a 62mm*40mm*12mm unsealed roller bearing. This bearing has significantly more rigidity than the 608 skateboard bearing I used in my first design.</p><p>Here are a few renders of the final motor design that I decided on. The white/clear parts are printed in PLA while the base stator is made of PETG for the extra temperature resistance as the coils heat up.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/completed-assembly.17.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/completed-assembly.17.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/completed-assembly.17.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/completed-assembly.17.avif 1600w, https://cadenkraft.com/content/images/2022/09/completed-assembly.17.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Completed assembly</span></figcaption></figure><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/title-page-render-axial-flux-motor.16-1.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/title-page-render-axial-flux-motor.16-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/title-page-render-axial-flux-motor.16-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/title-page-render-axial-flux-motor.16-1.avif 1600w, https://cadenkraft.com/content/images/2022/09/title-page-render-axial-flux-motor.16-1.avif 2000w" sizes="(min-width: 1200px) 1200px"><figcaption><span style="white-space: pre-wrap;">View of the magnets and coils with the rotor hidden</span></figcaption></figure><p>Below is a draggable render where you can see the final explosion view of the design from multiple angles.</p>
<!--kg-card-begin: html-->
<div style="max-width: 1746px; max-height: 1230px;">
  <div style="left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 70.4467%; overflow: hidden;">
    <iframe src="https://cadenkraft.com/content/renders/axial_flux_animation.html" allowfullscreen style="position: absolute; top: 0px; left: 0px; height: 100%; width: 1px; min-width: 100%; *width: 100%;" frameborder="0" scrolling="no">
    </iframe>
  </div>
</div>
<!--kg-card-end: html-->
<p>Here is an image of all of the different printed parts and hardware (aside from magnets and enamel wire) needed to assemble the motor.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/IMG_20220908_224657.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="2000" height="2000" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/IMG_20220908_224657.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/IMG_20220908_224657.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/IMG_20220908_224657.avif 1600w, https://cadenkraft.com/content/images/2022/09/IMG_20220908_224657.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">All completed printed parts</span></figcaption></figure><p>These photos show a more in depth look at the design that I used in order to secure the bearing to the plastic piece. This has proved to work significantly better than the friction fit bearing mount seen in my first design.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/09/IMG_20220908_224758.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/IMG_20220908_224758.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/IMG_20220908_224758.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/IMG_20220908_224758.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/09/IMG_20220908_224758.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/09/IMG_20220908_224809.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/IMG_20220908_224809.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/IMG_20220908_224809.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/IMG_20220908_224809.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/09/IMG_20220908_224809.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/09/IMG_20220908_224828.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/IMG_20220908_224828.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/IMG_20220908_224828.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/IMG_20220908_224828.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/09/IMG_20220908_224828.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Pictures of the parts I used to secure the bearing to the rotor and the stator</span></p></figcaption></figure><p>Finally here is an image of the final design assembled (again without magnets or coils) with a Sharpie for scale.</p><figure class="kg-card kg-image-card"><img src="https://cadenkraft.com/content/images/2022/09/IMG_20220908_223902.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="2000" height="2000" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/IMG_20220908_223902.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/IMG_20220908_223902.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/IMG_20220908_223902.avif 1600w, https://cadenkraft.com/content/images/2022/09/IMG_20220908_223902.avif 2000w" sizes="(min-width: 720px) 720px"></figure><p>Last but not least, I thought I would throw in an image showing the amount of prototype parts it took to get the fitment of everything just perfect.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/IMG_20220908_231138.avif" class="kg-image" alt="Ironless Axial Flux Motor" loading="lazy" width="2000" height="2000" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/IMG_20220908_231138.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/IMG_20220908_231138.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/IMG_20220908_231138.avif 1600w, https://cadenkraft.com/content/images/2022/09/IMG_20220908_231138.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">All of the failed prototype parts created through the design process</span></figcaption></figure><h2 id="assembly">Assembly</h2><p></p><p>Now that the printed parts are completed and they are successfully test fit I ordered the necessary magnets and wire needed to complete the motor and finally get it up and running. </p><p>The step-by-step plans for what the assembly will include are listed as below.</p><ul><li>Wind all 18 coils coils (0.65mm Enamel Wire)</li><li>Measure coil resistance with University LCR meter</li><li>Solder power leads and connectors to coils</li><li>Assemble magnets into rotor (36x6x6mm Neodymium magnets)</li><li>Create test stand to power and characterize properties of the motor</li></ul><p>Here are the photos of the wound coils for the motor as well as the magnets in the rotor. I used a magnetometer app to find the northern pole of the magnets in order to properly construct the Halbach array.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/08/IMG_20221005_212325.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2023/08/IMG_20221005_212325.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/08/IMG_20221005_212325.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/08/IMG_20221005_212325.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/08/IMG_20221005_212325.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/08/IMG_20221003_233943.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2023/08/IMG_20221003_233943.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/08/IMG_20221003_233943.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/08/IMG_20221003_233943.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/08/IMG_20221003_233943.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Magnets in rotor (left), Would coils (right)</span></p></figcaption></figure><p>In order to make sure that I wound the coils correctly and the solder joints didn&apos;t induce any added resistance I took the stator assembly to one of the university LCR meters to measure resistance and inductance.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/08/IMG_20221004_004635.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2023/08/IMG_20221004_004635.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/08/IMG_20221004_004635.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/08/IMG_20221004_004635.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/08/IMG_20221004_004635.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2023/08/IMG_20221004_114243.avif" width="2000" height="2000" loading="lazy" alt="Ironless Axial Flux Motor" srcset="https://cadenkraft.com/content/images/size/w600/2023/08/IMG_20221004_114243.avif 600w, https://cadenkraft.com/content/images/size/w1000/2023/08/IMG_20221004_114243.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2023/08/IMG_20221004_114243.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2023/08/IMG_20221004_114243.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Labeled coils (left), LCR meter setup (right)</span></p></figcaption></figure><p>Below is a table summarizing the LCR measurements.</p><table>
<thead>
<tr>
<th></th>
<th>AB</th>
<th>AC</th>
<th>BC</th>
</tr>
</thead>
<tbody>
<tr>
<td>Resistance (mOhms)</td>
<td>699</td>
<td>705</td>
<td>708</td>
</tr>
<tr>
<td>Inductance (uH)</td>
<td>56.45</td>
<td>57.69</td>
<td>57.19</td>
</tr>
</tbody>
</table>
<p>While coil A differed slightly I deemed this within my allotted margin of error and moved forward. </p><p>Finally once it was fully assembled I was able to hook everything up and hope that it would spin. Below is a video of its first spin.</p><hr><figure class="kg-card kg-embed-card kg-card-hascaption"><iframe width="200" height="150" src="https://www.youtube.com/embed/3goDI7w70WA?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen title="First Motor Test"></iframe><figcaption><p><span style="white-space: pre-wrap;">Video of me spinning up the motor for the first time.</span></p></figcaption></figure><p>I would have liked to test the torque of the motor with a dynamometer but I did not have access to one at the time. Maybe I will save this for a future project but for now I&apos;ll have to leave this one here.</p><hr><h2 id="conclusion">Conclusion</h2><p>I really enjoyed this project because it was the first project I&apos;ve done that required me to do a lot of research and get a baseline understanding of what was needed to complete the project before even starting. </p><p>This took quite a long time to make but I think it was ultimately worth it as I have vastly expanded my knowledge of motors and motor design and I actually was able to create a working motor. Hopefully I am able to carry the skills that I learned through this project onward to future ones. </p><p>Thanks for reading this post. If you are interested in any of my other posts they are linked below!</p><h2 id="references">References</h2><p></p><p>[1]   T. Batzel, A. Skraba, and R. D. Massi, &#x201C;Design and Test of an Ironless Axial 	</p><p>		Flux Permanent Magnet Machine using Halbach Array,&#x201D; <em>IAJC-ISAM Joint 	</em></p><p><em>		International Conference</em>, vol. 88, 2014.</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Solar Car GPS Tracker]]></title><description><![CDATA[For our 2022 solar car race, I designed a simple webpage that tied into our cars live telemetry in order to display the current speeds and location on a map. This allowed us to share our race progress with family and friends.]]></description><link>https://cadenkraft.com/solar-car-gps-tracker/</link><guid isPermaLink="false">65d922ddf6e4040001065703</guid><category><![CDATA[Solar Car]]></category><category><![CDATA[Coding]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Tue, 09 Aug 2022 02:54:00 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2022/09/solar-car-tracker-image.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2022/09/solar-car-tracker-image.avif" alt="Solar Car GPS Tracker"><p>This is a quick post about a small project that I made for the PRISUM Solar Car Club here at Iowa State.</p><p>Every other summer our team competes in the American Solar Challenge.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://www.americansolarchallenge.org/?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">ASC &amp; FSGP &#x2013; Collegiate solar car competition</div><div class="kg-bookmark-description"></div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://www.americansolarchallenge.org/ASC/wp-content/uploads/2020/04/cropped-IEF-Logo-500x500-1-180x180.avif" alt="Solar Car GPS Tracker"><span class="kg-bookmark-author">ASC &amp; FSGP Collegiate solar car competition</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://www.americansolarchallenge.org/ASC/wp-content/uploads/slider/cache/d29d01f89705748dbd698b322920150f/274218378_5250947878283319_4115610745363277301_n-1.avif" alt="Solar Car GPS Tracker"></div></a></figure><p>This competition consists of both a track race as well as a 1300 mile road race across the US seen above. The track race (FSGP) which includes safety scrutineering of the car as well as the American Solar Challenge road race are both about a week long leading to a very long two week competition.</p><p>As I could only get one week off from my internship I chose to attend the American Solar Challenge which means that I would have to sit and anxiously wait for updates from the team and completely out of the loop to what was happening live.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/solar-car-current.avif" class="kg-image" alt="Solar Car GPS Tracker" loading="lazy" width="2000" height="1500" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/solar-car-current.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/solar-car-current.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/solar-car-current.avif 1600w, https://cadenkraft.com/content/images/2022/09/solar-car-current.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Photo of our current solar car that went on race</span></figcaption></figure><p>I then realized that our car&apos;s telemetry system, which is cellularly linked and connected to the internet wherever the car goes, outputs the latitude and longitude of the car live every second through its log files.</p><p>The problem was that there wasn&apos;t any good way to display that data and as the competition drew near many of my friends and family began asking where they could follow the competition.</p><p>This gave me the idea to make this tracker webpage so anyone in the world could see the live position and speed of our car.</p><p>The main aspect of this project uses a project called Leaflet.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://leafletjs.com/?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Leaflet &#x2014; an open-source JavaScript library for interactive maps</div><div class="kg-bookmark-description">Leaflet is a modern, lightweight open-source JavaScript library for mobile-friendly interactive maps.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://leafletjs.com/docs/images/favicon.ico" alt="Solar Car GPS Tracker"><span class="kg-bookmark-author">GitHub</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://leafletjs.com/docs/images/logo.avif" alt="Solar Car GPS Tracker"></div></a></figure><p>Leaflet is an open source project for implementing custom maps into websites without the need for embedds, iframes, or api keys. This seemed like the perfect use case for me and I began coding up the site.</p><p>Once I got the map readly and scaled correctly I made a basic theme with our team colors and used the official route data from the American Solar Challenge website in order to map a route along the map with checkpoints.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/map-progress.avif" class="kg-image" alt="Solar Car GPS Tracker" loading="lazy" width="2000" height="1125" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/map-progress.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/map-progress.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/map-progress.avif 1600w, https://cadenkraft.com/content/images/2022/09/map-progress.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Completed basic map view and UI</span></figcaption></figure><p>Next I had to handle the hard part which consisted of establishing a live connection to the car while keeping the webpage static which is needed for using Github pages.</p><p>I started this process by procrastinating the hard part and spending way to much time in Photoshop creating a clipart-esc sprite of our current solar car.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/09/p15.avif" class="kg-image" alt="Solar Car GPS Tracker" loading="lazy" width="128" height="32"><figcaption><span style="white-space: pre-wrap;">Solar Car Map Marker Design</span></figcaption></figure><p>Finally I started on the live connection aspect and started implementing a websocket connection to the car. Unfortunately for me, our software team that made the telemetry page codes things extremely efficiently compressing all of the car&apos;s data output into illegible strings of bytes. While making the message size 20 times smaller this made rummaging through their code trying to understand it all 20 times harder.</p><p>In the end I was able to get the connection established to the car with my final bug-fix that got everything working being pushed to Github at 8:57am just three minutes before the competition started at 9:00.</p><p>With the tracker up and running there were many current members and alumni of the team as well as friends and family that were able to see the current status of the car with the GPS even being accurate enough for you to be able to roughly see the racing line on the track race.</p><p>Over the next several days of the competition I had nothing better to do but to make even more updates to the tracker. The final iteration included a terrain view button, live connection and speed status, and changing the direction the solar car icon faced based on the movement of the actual car.</p><figure class="kg-card kg-gallery-card kg-width-wide"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/09/connection-and-speed.avif" width="725" height="603" loading="lazy" alt="Solar Car GPS Tracker" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/connection-and-speed.avif 600w, https://cadenkraft.com/content/images/2022/09/connection-and-speed.avif 725w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/09/terrain-Map-View.avif" width="1198" height="1440" loading="lazy" alt="Solar Car GPS Tracker" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/terrain-Map-View.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/terrain-Map-View.avif 1000w, https://cadenkraft.com/content/images/2022/09/terrain-Map-View.avif 1198w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/09/solar-car-tracker-image-1.avif" width="2000" height="1125" loading="lazy" alt="Solar Car GPS Tracker" srcset="https://cadenkraft.com/content/images/size/w600/2022/09/solar-car-tracker-image-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/09/solar-car-tracker-image-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/09/solar-car-tracker-image-1.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/09/solar-car-tracker-image-1.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div></figure><p>And with that the project was more or less complete and I headed off to take part in the American Solar Challenge which ended up being a great experience!</p><p>If anyone is interested, the live webpage for the solar car is below. Whenever we test drive the car around campus it should connect and update the position live.</p>
<!--kg-card-begin: html-->
  <iframe src="https://prisum.cadenkraft.com/" height="800" title="Iframe Example"></iframe>  
<!--kg-card-end: html-->
<p>Finally, if anyone wants to see my horrid coding skills barely holding this whole project together the source code from the site and the repository its hosted out of is linked below.</p><figure class="kg-card kg-bookmark-card kg-card-hascaption"><a class="kg-bookmark-container" href="https://github.com/CKraft11/SolarCarTracker?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">GitHub - CKraft11/SolarCarTracker: Website for tracking the Iowa State University PrISUm Solar Car</div><div class="kg-bookmark-description">Website for tracking the Iowa State University PrISUm Solar Car - GitHub - CKraft11/SolarCarTracker: Website for tracking the Iowa State University PrISUm Solar Car</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://github.com/fluidicon.avif" alt="Solar Car GPS Tracker"><span class="kg-bookmark-author">GitHub</span><span class="kg-bookmark-publisher">CKraft11</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://opengraph.githubassets.com/1eb8503d41afee08832fddfe856743ffc23ee6746558cf704d901bd0f83693e4/CKraft11/SolarCarTracker" alt="Solar Car GPS Tracker"></div></a><figcaption><p><span style="white-space: pre-wrap;">Github repo for tracker site</span></p></figcaption></figure><p>This project was really fun to work on and I definitely learned a lot as coding projects are not something I often do. It was also really cool hearing from all the past alumni on the team, some of whom I&apos;ve never met, talk about religiously stalking the page in an open tab at work for those two weeks.</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Creating a 3D Printed Brushless Motor]]></title><description><![CDATA[This was my first attempt at making a motor from scratch. This design is a simple brushless motor made with components I had on hand at the time and taught me quite a lot about motor design and magnetics.]]></description><link>https://cadenkraft.com/creating-a-3d-printed-brushless-motor/</link><guid isPermaLink="false">65d922ddf6e4040001065702</guid><category><![CDATA[Motors]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Fri, 08 Jul 2022 03:02:00 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2024/02/og-motor-render.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2024/02/og-motor-render.avif" alt="Creating a 3D Printed Brushless Motor"><p>With my work in the Iowa State Solar Car club I have learned so many things about so many different technologies that I have not had the chance of working with before.</p><p>One of the things that has come to interest me the most are motors. Getting the chance to learn and tune the motors on our car has led me to develop a further interest in how they work.</p><p>On our current car we use BLDC motors from Mitsuba in Japan directly driving our wheels inside the rims of our wheels.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/mitsuba-m2096.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="2000" height="2667" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/mitsuba-m2096.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/mitsuba-m2096.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/07/mitsuba-m2096.avif 1600w, https://cadenkraft.com/content/images/2022/07/mitsuba-m2096.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Mitsuba 2096D3 Motors Used</span></figcaption></figure><p>With this urge to dive deeper and figure out how exactly brushless motors work I decided to try and design my own so I can experience every hurdle and roadblock and hopefully learn something from it.</p><hr><p>Going into the design I just wanted to try my hand at making a motor without having to learn advanced motor simulation software like Ansys MotorCAD and Ansys Maxwell. My goal was simply to make a motor that works and spins on its own. </p><p>Starting a design in Autodesk Inventor, I began by creating the main profile of the stator. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/image.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="1155" height="1092" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/image.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/image.avif 1000w, https://cadenkraft.com/content/images/2022/07/image.avif 1155w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Bottom Stator Profile Design</span></figcaption></figure><p>I made this design using reference images I found online while adding features optimizing the design to be 3D printed. As seen above I also added slots on either side of the coil to make routing each coil and keeping it organized significantly easier while allowing all the wires to go into the center so the design can be screwed flush.</p><p>Continuing on the design I needed to create a solution for implementing a bearing. As I wanted to keep the costs down on the project I decided to use a standard open ball 608 skateboard bearing that I had lying around.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/image-1.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="1280" height="1280" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/image-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/image-1.avif 1000w, https://cadenkraft.com/content/images/2022/07/image-1.avif 1280w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Open Ball 608 Bearing</span></figcaption></figure><p>Finally I ordered some 2mm*10mm*20mm neodymium magnets off of AliExpress. I then culminated this into a final design using all of these parts.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/motor-explosion-render.15.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/motor-explosion-render.15.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/motor-explosion-render.15.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/07/motor-explosion-render.15.avif 1600w, https://cadenkraft.com/content/images/2022/07/motor-explosion-render.15.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Explosion View of the Final Design</span></figcaption></figure><hr><p>Now it comes time to assemble the motor. I started researching different ways of winding the coils and different parameters in terms of coil winding and wire gauge that I could use to my advantage to increase the efficiency of the motor.</p><p>I started researching the differences between Wye and Delta winding configurations.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/deltavswye.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="768" height="400" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/deltavswye.avif 600w, https://cadenkraft.com/content/images/2022/07/deltavswye.avif 768w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Diagram of Delta and Wye Configurations</span></figcaption></figure><p>Although a Wye configuration on paper would be better suited for this motor design because of the reduced need of current to start spinning the motor. However, I chose to use the Delta configuration as it was significantly easier to wire given the design that I had.</p><p>This link below contains a lot of interesting information if you are interested in learning more about the differences in these two types of windings.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="http://www.differencebetween.net/science/difference-between-delta-and-wye/?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Difference between Delta and Wye | Difference Between</div><div class="kg-bookmark-description">Difference between Delta and Wye Electricity is a necessity these days used to illuminate buildings and homes, to operate air conditioners and to power trains. In fact, electricity powers almost everything such as computers, radios, televisions, medical devices, and an ever-increasing variety of dev&#x2026;</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="http://cdn.differencebetween.net/wp-content/uploads/2018/05/icon-250.avif" alt="Creating a 3D Printed Brushless Motor"><span class="kg-bookmark-author">&lt;img src=&quot;//www.google.com/images/poweredby_transparent/poweredby_999999.gif&quot; alt=&quot;Google&quot; /&gt; Custom Search</span><span class="kg-bookmark-publisher">Sagar Khillar</span></div></div><div class="kg-bookmark-thumbnail"><img src="http://www.differencebetween.net/wp-content/uploads/2018/11/Difference-between-Delta-and-Wye-.avif" alt="Creating a 3D Printed Brushless Motor"></div></a></figure><hr><p>Although I could research and try to optimize the wire guage of the coil I already had a spool of 0.5mm enameled copper wire that I did not have plans to do anything with so I decided to use that.</p><p>I chose to use this wire with 60 windings across the all 6 poles of the motor in 3 individual phases.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/IMG_20220727_213536.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="2000" height="2000" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/IMG_20220727_213536.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/IMG_20220727_213536.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/07/IMG_20220727_213536.avif 1600w, https://cadenkraft.com/content/images/2022/07/IMG_20220727_213536.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Stator Wiring Completed</span></figcaption></figure><p>Now that the wiring was done I needed to test the motors functionality. I hooked the motor up to an old ESC that I had from making drones and using a servo controller to manually control the RPM of the ESC. I found that the motor worked best around 14-15 volts but did not have a lot of torque output. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/IMG_20220727_213632.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="2000" height="2000" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/IMG_20220727_213632.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/IMG_20220727_213632.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/07/IMG_20220727_213632.avif 1600w, https://cadenkraft.com/content/images/2022/07/IMG_20220727_213632.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Completed Motor Assembly</span></figcaption></figure><p>One thing I did notice was that I needed to flick the motor pretty hard in order for it to start spinning. This is probably due to many inefficiencies in the motor such as lacking an iron core for the electromagnet or the higher starting amperage needed for a Wye configuration.</p><h2 id="future-changes">Future Changes</h2><p></p><p>Below I am going to sum up a few key takeaways that I have learned from this project and future ways I could remedy it in the next motor design that I make. I think the biggest faults in the current design are as listed below.</p><ul><li>Lack of iron core in the electromagnets</li><li>Magnets are pretty weak and could be stronger</li><li>Spacing between the coil and magnet significantly too high</li><li>Using Delta wiring instead of Wye</li></ul><p>Some ways that I could remedy this are by making an axial flux motor for my next design. This would allow for an extremely thin gap between the rotor and stator and because of the coil design of an axial flux motor I could also make a separate jig for more accurately winding each individual coil instead of winding around the stator all at once.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/07/image-4.avif" class="kg-image" alt="Creating a 3D Printed Brushless Motor" loading="lazy" width="2000" height="1125" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/image-4.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/image-4.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/07/image-4.avif 1600w, https://cadenkraft.com/content/images/2022/07/image-4.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example of an Axial Flux Motor</span></figcaption></figure><p>Since making this I have also learned more about motor theory and simulating motors through applications like Ansys MotorCAD and Maxwell through work that I have done at my internship at Husco Automotive.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/07/wn2022r2-maxwell-picture1-1.webp" width="1200" height="760" loading="lazy" alt="Creating a 3D Printed Brushless Motor" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/wn2022r2-maxwell-picture1-1.webp 600w, https://cadenkraft.com/content/images/size/w1000/2022/07/wn2022r2-maxwell-picture1-1.webp 1000w, https://cadenkraft.com/content/images/2022/07/wn2022r2-maxwell-picture1-1.webp 1200w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/07/ansys-motorcad.avif" width="640" height="480" loading="lazy" alt="Creating a 3D Printed Brushless Motor" srcset="https://cadenkraft.com/content/images/size/w600/2022/07/ansys-motorcad.avif 600w, https://cadenkraft.com/content/images/2022/07/ansys-motorcad.avif 640w"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Examples of Ansys MotorCAD and Maxwell Being Used for Motor Design</span></p></figcaption></figure><p>Hopefully I will be able to utilize these skills in order to refine my next design to be more efficient and quantitatively thought out.</p><p>Stay tuned for that to come!</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Solar Car Steering Wheel]]></title><description><![CDATA[This was one of my first projects on solar car where I designed a new steering wheel that had its own integrated PCB to minimize the wiring harness connecting it to the rest of the car.]]></description><link>https://cadenkraft.com/designing-solar-car-steering-wheel/</link><guid isPermaLink="false">65d922ddf6e4040001065701</guid><category><![CDATA[Solar Car]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Thu, 24 Mar 2022 03:26:00 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2024/02/steering-wheel-title-new.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2024/02/steering-wheel-title-new.avif" alt="Solar Car Steering Wheel"><p>At Iowa State University, one of my main interests has quickly become the PRISUM Solar Car Club. It has given me an opportunity to use my engineering skills outside of classes with some pretty cool people. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220507_174419712_BURST033_exported_1651980696158.avif" class="kg-image" alt="Solar Car Steering Wheel" loading="lazy" width="2000" height="1500" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220507_174419712_BURST033_exported_1651980696158.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220507_174419712_BURST033_exported_1651980696158.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220507_174419712_BURST033_exported_1651980696158.avif 1600w, https://cadenkraft.com/content/images/2022/06/IMG_20220507_174419712_BURST033_exported_1651980696158.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Current PrISUm Solar Car, P15 Eliana</span></figcaption></figure><hr><p>As I am a Freshman at Iowa State, and at the time of writing P15 is coming to the end of its build cycle, most of the core systems in the car have already been set in stone. However there are a few smaller projects that haven&apos;t been tackled yet. </p><p>One of these projects is redesigning the steering wheel. The current steering wheel in the car has given us many problems that have greatly inhibited our ability to drive reliability without breaking down. Looking at the image of the disassembled current steering wheel below you can see that it mostly consists of a waterjet sheet of carbon fiber with holes drilled for the quick disconnect fitting and the buttons used for turn signals, hazards, etc.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20211114_131833__01.avif" class="kg-image" alt="Solar Car Steering Wheel" loading="lazy" width="2000" height="1805" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20211114_131833__01.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20211114_131833__01.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20211114_131833__01.avif 1600w, https://cadenkraft.com/content/images/2022/06/IMG_20211114_131833__01.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Old P15 Steering Wheel Disassembled</span></figcaption></figure><p>The problem with this design is that the wires that connect to the buttons to the aptly named buttonboard PCB that controls them, get individually routed to buttonboard deeper into the car. This means that when rotating the steering wheel, as there are more than 15 individual wires being rotated, over time some either develop a loose connection or snap off entirely.</p><p>As the steering wheel controls everything from turn signals to our regenerative braking we cannot have these faults inhibit us from driving at race this summer.</p><p>Some other smaller issues with this design are that as the holes for the buttons are drilled, the number of them and their positions are fixed and can only be redone by re-waterjetting the main carbon panel which can cost up to $50 in materials and machine time. The hole pattern was also drilled by hand with no CAD available which makes creating a strain relief component that integrates with the current design quite challenging.</p><p>Taking all this in mind I started on defining the requirements I was going to set for myself for the new design to meet.</p><hr><ul><li>Integrate the buttonboard PCB into the steering wheel itself</li><li>Limit the connection from the steering wheel to the car to a single wire</li><li>Provide the ability for the button position and count to be quickly redesigned if needed</li><li>Utilize 3D printed parts as much as possible and mechanical fasteners over adhesives</li></ul><hr><p>With these in mind I started to design the steering wheel. I jumped into Inventor and started modeling and after a few hours was left with my first iteration.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/rev1-back.avif" width="1185" height="1062" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev1-back.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev1-back.avif 1000w, https://cadenkraft.com/content/images/2022/06/rev1-back.avif 1185w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/rev1-buttons.avif" width="858" height="695" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev1-buttons.avif 600w, https://cadenkraft.com/content/images/2022/06/rev1-buttons.avif 858w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/rev1-front.avif" width="1111" height="1104" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev1-front.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev1-front.avif 1000w, https://cadenkraft.com/content/images/2022/06/rev1-front.avif 1111w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Various views of the first iteration steering wheel design</span></p></figcaption></figure><p>As seen above, there are many aspects to the new design including the integration of the buttonboard PCB shown as a placeholder in green, with the smaller PCB being the compute module needed to run the code. There are also 3D printed redesignable inserts for the buttons combined with an RJ45 Ethernet jack used in order to transmit power and CAN data from buttonboard to the rest of the car.</p><p>I showed this design to the team and received a lot of really helpful feedback. The core areas of feedback are as follows.</p><hr><ul><li>This design is larger than the current one and takes up more space in the solar car. Some drivers noted that the current one already got in the way often</li><li>Much of the PCB and compute module are unprotected which could lead to damage from it being handled so much</li><li>PCB shape and size could lead to increased manufacturing cost from the PCB fabricator</li><li>Add some sort of gasket between the PCB and carbon panel</li></ul><hr><p>With this feedback I embarked on creating a second more compact and integrated design that could also fufill the new requirements of smaller size as well as protecting and optimizing the shape of the PCB. </p><p>I culminated this all into a brand new design to which a draggable view of it is seen below.</p><hr>
<!--kg-card-begin: html-->
<div style="max-width: 1912px; max-height: 1230px;">
  <div style="left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 64.3305%; overflow: hidden;">
    <iframe src="https://cadenkraft.com/content/renders/steeringwheel.html" allowfullscreen style="position: absolute; top: 0px; left: 0px; height: 100%; width: 1px; min-width: 100%; *width: 100%;" frameborder="0" scrolling="no">
    </iframe>
  </div>
</div>
<!--kg-card-end: html-->
<hr><p>This new design includes numerous improvements from the first namely being, compact size and increased protection around the PCB and exposed electronics. It also has 2 RJ45 connectors in case one fails.</p><figure class="kg-card kg-image-card kg-width-wide"><img src="https://cadenkraft.com/content/images/2022/06/rev2--explosion.11-1.avif" class="kg-image" alt="Solar Car Steering Wheel" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev2--explosion.11-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev2--explosion.11-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/rev2--explosion.11-1.avif 1600w, https://cadenkraft.com/content/images/2022/06/rev2--explosion.11-1.avif 2000w" sizes="(min-width: 1200px) 1200px"></figure><figure class="kg-card kg-image-card kg-width-wide"><img src="https://cadenkraft.com/content/images/2022/06/rev2--explosion-side.13.avif" class="kg-image" alt="Solar Car Steering Wheel" loading="lazy" width="2000" height="1409" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev2--explosion-side.13.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev2--explosion-side.13.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/rev2--explosion-side.13.avif 1600w, https://cadenkraft.com/content/images/2022/06/rev2--explosion-side.13.avif 2000w" sizes="(min-width: 1200px) 1200px"></figure><p>Seen below are areas on the new design with increased protection around the electronics.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/rev2-back-cover.9.avif" width="1280" height="902" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev2-back-cover.9.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev2-back-cover.9.avif 1000w, https://cadenkraft.com/content/images/2022/06/rev2-back-cover.9.avif 1280w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/rev2-button-cover.8.avif" width="1280" height="902" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev2-button-cover.8.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev2-button-cover.8.avif 1000w, https://cadenkraft.com/content/images/2022/06/rev2-button-cover.8.avif 1280w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/rev2-front-cover.10.avif" width="1280" height="902" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/rev2-front-cover.10.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/rev2-front-cover.10.avif 1000w, https://cadenkraft.com/content/images/2022/06/rev2-front-cover.10.avif 1280w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Compute Module Cover (left), Button/Wire Cover (center), Front Component Cover(right)</span></p></figcaption></figure><p>After showing this design to the team nobody had issues to raise on the second iteration so I began working with the electronics team to develop the new buttonboard PCB meeting the form factor of my new design.</p><hr><p>I started off by exporting the outline of the PCB placeholder I created in Inventor and opened it up into Adobe Illustrator where I marked areas where electronic components could not be placed as the PCB would be directly against another part.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/Rev2-Silkscreen-Bottom.avif" width="1006" height="621" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/Rev2-Silkscreen-Bottom.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/Rev2-Silkscreen-Bottom.avif 1000w, https://cadenkraft.com/content/images/2022/06/Rev2-Silkscreen-Bottom.avif 1006w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/Rev2-Silkscreen-Top.avif" width="1006" height="621" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/Rev2-Silkscreen-Top.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/Rev2-Silkscreen-Top.avif 1000w, https://cadenkraft.com/content/images/2022/06/Rev2-Silkscreen-Top.avif 1006w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Outlines of PCB part placement</span></p></figcaption></figure><p>These outlines could then be imported into Altium Designer, our teams&apos; PCB designer. Members of the electrical team were then able to convert this into a PCB board outline and start the process of creating a board schematic and placing components.</p><p>Here is the finished design that they came up with below.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/buttonboard-pcb.avif" width="1232" height="944" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/buttonboard-pcb.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/buttonboard-pcb.avif 1000w, https://cadenkraft.com/content/images/2022/06/buttonboard-pcb.avif 1232w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/buttonboard-schematic.avif" width="663" height="524" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/buttonboard-schematic.avif 600w, https://cadenkraft.com/content/images/2022/06/buttonboard-schematic.avif 663w"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">buttonboard PCB layout (left), buttonboard schematic (right)</span></p></figcaption></figure><p>With this step complete we were able to order the PCB and its components and I was able to start manufacturing the mechanical parts needed for assembly.</p><p>While the center peice was again waterjet out of the same carbon material of the first, most of the components were 3D printed using the 3D Printing Club&apos;s print lab in Prusa3D PETG plastic to provide temperature resistance during the hot summer temperatures they will endure.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220131_194914.avif" class="kg-image" alt="Solar Car Steering Wheel" loading="lazy" width="2000" height="2667" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220131_194914.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220131_194914.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220131_194914.avif 1600w, https://cadenkraft.com/content/images/2022/06/IMG_20220131_194914.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Printing handle pieces on a Prusa MK3s</span></figcaption></figure><p>Once all the parts were printed and the carbon plate was waterjet I soldered and tested the components onto the brand new buttonboard PCB.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220412_142024.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220412_142024.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220412_142024.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220412_142024.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220412_142024.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220412_142034.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220412_142034.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220412_142034.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220412_142034.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220412_142034.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220412_130326.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220412_130326.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220412_130326.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220412_130326.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220412_130326.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Soldered buttonboard PCB (left, center), Buttonboard testing (right)</span></p></figcaption></figure><p>Finally, all the parts were ready to assemble. Here are some images documenting the assembly of the finished product.</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220411_152103-1.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220411_152103-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220411_152103-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220411_152103-1.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220411_152103-1.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220411_152115-1.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220411_152115-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220411_152115-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220411_152115-1.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220411_152115-1.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220413_134712-1.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220413_134712-1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220413_134712-1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220413_134712-1.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220413_134712-1.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Front PCB area (left), Wheel assembled without back covers (center), 3D printed rubber protection gasket (right)</span></p></figcaption></figure><figure class="kg-card kg-gallery-card kg-width-wide"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220411_152448-2.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220411_152448-2.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220411_152448-2.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220411_152448-2.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220411_152448-2.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220413_135638-2.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220413_135638-2.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220413_135638-2.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220413_135638-2.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220413_135638-2.avif 2400w" sizes="(min-width: 720px) 720px"></div><div class="kg-gallery-image"><img src="https://cadenkraft.com/content/images/2022/06/IMG_20220413_142736-2.avif" width="2000" height="2000" loading="lazy" alt="Solar Car Steering Wheel" srcset="https://cadenkraft.com/content/images/size/w600/2022/06/IMG_20220413_142736-2.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/06/IMG_20220413_142736-2.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/06/IMG_20220413_142736-2.avif 1600w, https://cadenkraft.com/content/images/size/w2400/2022/06/IMG_20220413_142736-2.avif 2400w" sizes="(min-width: 720px) 720px"></div></div></div></figure><p>And with that the project was more or less complete. The software team was able to make a few adjustments to their code and it was connected to the car and ready to go in no time. </p><p>Over the course of the past few weeks the steering wheel has been working great while driving and has presented no issues so far and seems to have solved the ones of the previous design.</p><p>I really enjoyed making this project as allowed me to learn a lot more about the solar car club and meet more people on the team. I think the final product turned out really well and bears a striking resemblance to the CAD used to create it. Hopefully it will be able to stand up to the intense rigor of the 1300 mile American Solar Challenge this summer!</p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://home.cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Ghost Blog with Free Webhosting]]></title><description><![CDATA[This is an in depth guide on how I made this very website through locally developing the website and pushing changes to Github pages. This allows me to host this site while paying $0 in hosting.]]></description><link>https://cadenkraft.com/creating-a-ghost-blog-with-free-webhosting/</link><guid isPermaLink="false">65d922ddf6e40400010656fc</guid><category><![CDATA[Tutorial]]></category><category><![CDATA[Coding]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Wed, 23 Feb 2022 04:58:02 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2022/02/ghost-blog.avif" medium="image"/><content:encoded><![CDATA[<ul><li>Updated 2/29/2024</li></ul><img src="https://cadenkraft.com/content/images/2022/02/ghost-blog.avif" alt="Ghost Blog with Free Webhosting"><p>When I began my search to find the best blog/CMS that I could host at home (or in my dorm room) on my server, I landed on Ghost pretty quickly with its slick UI and broad feature-set including an admin panel, app integrations, and native <a href="https://docs.docker.com/get-started/overview/?ref=10.0.0.222">Docker</a> support. </p><p>My problems arose when it came to hosting. Although I can host it on my server I currently cannot port-forward traffic to my blog, and it also introduces a pretty significant security risk.  </p><p>Bring in Github pages. Github pages is a great way to host websites completely for free with the one caveat being that they have to be completely static. As Ghost doesn&apos;t natively support this to my knowledge, this is where the guide begins.</p><h2 id="requirements"><strong>Requirements</strong></h2><p></p><ul><li>Server/Laptop/PC you have to host the server on for local editing. The final site will be on GitHub pages so this machine doesn&apos;t have to be running 24/7.</li><li>Free Github account</li><li>Basic Linux command line knowledge</li><li>Patience</li></ul><h2 id="setting-up-linux-environment"><strong>Setting up Linux environment</strong></h2><p></p><p>This guide should work natively on Linux and macOS (untested) and if you only have a Windows machine, it also works using <a href="https://docs.microsoft.com/en-us/windows/wsl/install?ref=10.0.0.222">WSL2</a>. </p><p>First, we need to install Docker and some other packages. Going forward, I will be listing commands that would be used on Debian/Ubuntu-based systems as that is what I personally used, but they should be similar for other platforms. To install Docker, we can run these commands below.</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">sudo apt-get install ca-certificates gnupg lsb-release nano git curl imagemagick optipng pngcrush jpegoptim</code></pre><figcaption><p><span style="white-space: pre-wrap;">Download general packages and image optimization</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-bash">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</code></pre><figcaption><p><span style="white-space: pre-wrap;">Add Docker GPG key</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-bash">echo \
  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</code></pre><figcaption><p><span style="white-space: pre-wrap;">Set up stable repository</span></p></figcaption></figure><pre><code class="language-bash">sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli docker-compose containerd.io</code></pre><p>Next, we want to install all of the packages needed for the static site generator that we will be running outside of the Docker container on bare metal.</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">sudo apt-get install python3 python3-pip wget</code></pre><figcaption><p><span style="white-space: pre-wrap;">Download Python 3 and pip</span></p></figcaption></figure><h2 id="setting-up-the-ghost-docker-container"><strong>Setting up the Ghost Docker container</strong></h2><p></p><p>The method I&apos;m going to be using to set up Ghost with Docker is through docker-compose. Firstly we need to create a docker-compose.yml file.</p><pre><code class="language-bash">nano docker-compose.yaml</code></pre><p> In nano paste and edit the docker-compose install parameters below.</p><p>Optionally you can mount the folders from within your docker container to somewhere on your local machine which can make development much easier. If you would like to do that add a <code>volumes:</code> section under the <code>environment:</code> section on both the <code>ghost</code> and <code>db</code> containers. If you are running Ghost on a remote server make sure to change <code>url:</code> from <code>http://localhost:2368</code> to <code>http://SERVERIP:2368</code>. If you don&apos;t want to deal with any volumes you can delete both sections entirely.</p><p>You also need to know your <code>PUID</code> and <code>PGID</code> of your user account. Run the following commands to determine those values and then add those to the file below.</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">id -u # returns PUID

id -g # returns PGID</code></pre><figcaption><p><span style="white-space: pre-wrap;">Get your PUID and PGID</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-docker">version: &apos;3.1&apos;

services:

  ghost:
    image: ghost:latest
    restart: always
    ports:
      - 2368:2368
    environment:
      # see https://ghost.org/docs/config/#configuration-options
      database__client: mysql
      database__connection__host: db
      database__connection__user: root
      database__connection__password: EXAMPLE
      database__connection__database: ghost
      PUID: 1000 # change these to your linux account with &quot;id -u&quot; and &quot;id -g&quot;
      PGID: 100
      url: http://localhost:2368
      #NODE_ENV: development
    volumes: # allows you to easier develop and transfer files in and out of your website
      - /PATH/ON/LOCAL/MACHINE/ghost/content:/var/lib/ghost/content

  db:
    image: mysql:8.0
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: EXAMPLE
      MYSQL_DATABASE: ghost
      PUID: 1000 # change these to your linux account with &quot;id -u&quot; and &quot;id -g&quot;
      PGID: 100
    volumes: # allows you to easier develop backup/manage your database
      - /PATH/ON/LOCAL/MACHINE/ghost/mysql:/var/lib/mysql</code></pre><figcaption><p><span style="white-space: pre-wrap;">docker-compose.yml</span></p></figcaption></figure><p>Press <code>Ctrl-X</code> to exit and <code>Y</code> to save your changes. Before we start the container, we also want to add your current user to the Docker group on your computer so you will be able to run all of these commands without using sudo.</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">sudo groupadd docker</code></pre><figcaption><p><span style="white-space: pre-wrap;">Create the Docker group</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-bash">sudo usermod -aG docker $USER</code></pre><figcaption><p><span style="white-space: pre-wrap;">Add the current user to the Docker group</span></p></figcaption></figure><p>You will likely have to log out and log in for these changes to be implemented.</p><p>Finally, we can get into actually starting up the Ghost blog. If you are not running this on a server and are on a laptop or desktop, I recommend using <a href="https://code.visualstudio.com/?ref=10.0.0.222">VSCode</a> with the Docker extension. The workflow is very nice for managing Docker containers and images.</p><figure class="kg-card kg-image-card"><img src="https://cadenkraft.com/content/images/2022/02/docker-3.avif" class="kg-image" alt="Ghost Blog with Free Webhosting" loading="lazy" width="666" height="176" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/docker-3.avif 600w, https://cadenkraft.com/content/images/2022/02/docker-3.avif 666w"></figure><p>Now we need to load up the Docker container we created earlier. Navigate to the directory that you created the docker-compose.yml file in and run</p><pre><code class="language-bash">docker-compose up -d</code></pre><p>This should take a while as it has to download and set up the Ghost Docker image but after it says the website is finished loading you should be able to navigate in your browser to <code>http://localhost:2368</code> or <code>http://serverip:2368</code> depending on your setup. You should see a nice-looking blog template with all the images loaded properly. Then you can add <code>/ghost</code> to the end of your URL to access the admin dashboard. </p><figure class="kg-card kg-image-card"><img src="https://cadenkraft.com/content/images/2022/02/ghost-default.avif" class="kg-image" alt="Ghost Blog with Free Webhosting" loading="lazy" width="1400" height="1123" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/ghost-default.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/02/ghost-default.avif 1000w, https://cadenkraft.com/content/images/2022/02/ghost-default.avif 1400w" sizes="(min-width: 720px) 720px"></figure><p>Here it will prompt you to set up an account and parts of your blog. I&apos;m not going to go too much more in-depth on that side of things as that is more up to the user but if you have everything up to here working we should be good to set up the GitHub pages integration.</p><h2 id="setting-up-github-pages"><strong>Setting up Github Pages</strong></h2><p></p><p>Now that we have our local Ghost blog up and running, we want configure a static site to be generated and sent to Github Pages. The tool we will be using is called Ecto1. A big thanks to <a href="https://github.com/arktronic?ref=10.0.0.222" rel="author">arktronic</a> for making it and all of the useful documentation. To install it, we just run </p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://github.com/arktronic/ecto1?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">GitHub - arktronic/ecto1: Ghost blog downloader/scraper/static-site-maker</div><div class="kg-bookmark-description">Ghost blog downloader/scraper/static-site-maker. Contribute to arktronic/ecto1 development by creating an account on GitHub.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://github.com/fluidicon.avif" alt="Ghost Blog with Free Webhosting"><span class="kg-bookmark-author">GitHub</span><span class="kg-bookmark-publisher">arktronic</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://opengraph.githubassets.com/2f21f11350247dd18a9b06e189effe53e4cd46f89f5bf410db8d7cff7ecad6dc/arktronic/ecto1" alt="Ghost Blog with Free Webhosting"></div></a></figure><pre><code class="language-bash">git clone https://github.com/arktronic/ecto1</code></pre><p>Next, we need to prepare our git repository on our personal machine. To start, create a folder you want the repository to be in and initialize it. </p><pre><code class="language-bash">mkdir ghost
cd ghost/
git init </code></pre><p>Then move all of the files cloned from the ecto1 repository into your ghost folder. After that, we need to install the required dependencies to run ecto1.</p><pre><code class="language-bash">pip install -r requirements.txt -t .</code></pre><p>In order for ecto1 to work, we are going to need to change a few things in the ecto1.py script</p><figure class="kg-card kg-code-card"><pre><code class="language-python">		self.target_path_root = pathlib.Path(os.getcwd()) / &apos;docs&apos;</code></pre><figcaption><p><span style="white-space: pre-wrap;">Change line 34 to this</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-python">print(&apos;Done. Contents have been downloaded into:&apos;, pathlib.Path(os.getcwd()) / &apos;docs&apos;)</code></pre><figcaption><p><span style="white-space: pre-wrap;">Change line 263 to this</span></p></figcaption></figure><p>Then we have to go online to Github and create a few things. Starting with the repository, create a repository with any name you like and copy the URL under the &quot;code&quot; dropdown.</p><div class="kg-card kg-callout-card kg-callout-card-blue"><div class="kg-callout-emoji">&#x26A0;&#xFE0F;</div><div class="kg-callout-text">If your do not have a custom domain the name of your Github repo should be your Github username or the static site generator will not work!</div></div><p></p><figure class="kg-card kg-image-card"><img src="https://cadenkraft.com/content/images/2022/02/image-13.avif" class="kg-image" alt="Ghost Blog with Free Webhosting" loading="lazy" width="373" height="252"></figure><p>We want to add this repository as a remote repository location for git to push the files. We can do this by running </p><pre><code class="language-bash">git remote add origin https://github.com/yourlinkhere.git</code></pre><p>We need to go back to Github and generate a personal access token that ecto1 can use when creating the site to push files to your repo. Go to this <a href="https://github.com/settings/tokens?ref=10.0.0.222">link here</a> and create a new token with a name of your choice and give it repo permissions. Copy this link and keep it somewhere safe (e.g., not in your git repository folder). Next, we can run the following commands to test everything working.</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">touch test
git add .
git commit -m &quot;first commit&quot;
git push -u origin master
git config --global credential.helper store
</code></pre><figcaption><p><span style="white-space: pre-wrap;">When prompted for a username and password, use the token created earlier in place of your password.</span></p></figcaption></figure><p>You should see a test file in your Github repo and a commit message if all has gone well.</p><h2 id="set-up-ecto1-with-github"><strong>Set up Ecto1 with Github</strong></h2><p></p><p>Lastly, we need to set up a script to update Github with the latest version of the blog. Luckily, I have made a script for this, which is set up below</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">nano ghost-updater.sh</code></pre><figcaption><p><span style="white-space: pre-wrap;">Create a script in your git directory</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-bash">#!/bin/bash

URL=&quot;cadenkraft.com&quot; #Change this to your url
SERVERIP=&quot;localhost&quot; #Change this to your server ip if Ghost is on another machine

# this is needed or me running the script on my own website for this very page will break the script by replacing all the filetypes.
PNG=&quot;png&quot;
JPG=&quot;jpg&quot;
JPEG=&quot;jpeg&quot;
WEBP=&quot;webp&quot;

date=$(date)
git pull origin master
rm -r docs
mkdir docs
cd docs
echo $URL &gt; CNAME
cd -
ECTO1_SOURCE=http://$SERVERIP:2368 ECTO1_TARGET=https://$URL python3 ecto1.py
cd docs
docker cp ghost:/var/lib/ghost/content/images/. content/images
cd -
IMGMSG=&quot;No image optimization was used&quot;
while getopts &quot;:o:&quot; opt; do
  case $opt in
    o)
      arg_o=&quot;$OPTARG&quot;
      echo &quot;Option -o with argument: $arg_o&quot;
      if [ $arg_o = &quot;webp&quot; ]; then
        echo &apos;Conversion to webp has started&apos;
        sleep 1
        find docs/content/images/. -type f -regex &quot;.*\.\($JPG\|$JPEG\|$PNG\)&quot; -exec mogrify -format webp {}  \; -print
        find docs/content/images/. -type f -regex &quot;.*\.\($JPG\|$JPEG\|$PNG\)&quot; -exec rm {}  \; -print
        grep -lR &quot;.$JPG&quot; docs/ | xargs sed -i &apos;s/\.$JPG/\.$WEBP/g&apos;
        grep -lR &quot;.$JPEG&quot; docs/ | xargs sed -i &apos;s/\.$JPEG/\.$WEBP/g&apos;
        grep -lR &quot;.$PNG&quot; docs/ | xargs sed -i &apos;s/\.$PNG/\.$WEBP/g&apos;
        echo &apos;Conversion to webp has completed&apos;
        IMGMSG=&quot;Images converted to webp&quot;
      else
        echo &apos;Standard image optimization has started&apos;
        sleep 1
        #credit goes to julianxhokaxhiu for these commands 
        find . -type f -iname &quot;*.$PNG&quot; -exec optipng -nb -nc {} \;
        find . -type f -iname &quot;*.$PNG&quot; -exec pngcrush -rem gAMA -rem alla -rem cHRM -rem iCCP -rem sRGB -rem time -ow {} \;
        find . -type f \( -iname &quot;*.$JPG&quot; -o -iname &quot;*.$JPEG&quot; \) -exec jpegoptim -f --strip-all {} \;
        echo &apos;Standard image optimization has completed&apos;
        IMGMSG=&quot;Standard image optimization was used&quot;
      fi
      ;;
    \?)
      echo &quot;Invalid option: -$OPTARG&quot;
      exit 1
      ;;
  esac
done
git add .
git commit -m &quot;Compiled Changes - $date | $IMGMSG&quot; ghost-updater.sh ecto1.py requirements.txt README.md serve.py docs/.
git config --global credential.helper store
git push -u origin master</code></pre><figcaption><p><span style="white-space: pre-wrap;">Paste the following code into nano and change the URL and SERVERIP variables at the top</span></p></figcaption></figure><p>Also, I know there are some patchy solutions to some current bugs in Ecto1 in this script with the main problem being that Ecto1 only has access to the images served on the local site and not every image in the <code>content/</code> folder. If you are reading this it is probably still working.</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">sudo chmod +x ghost-updater.sh</code></pre><figcaption><p><span style="white-space: pre-wrap;">Make the script executable</span></p></figcaption></figure><figure class="kg-card kg-code-card"><pre><code class="language-bash"># Option 1
./ghost-updater.sh # pushes static site to github with no optmization

# Option 2
./ghost-updater.sh -o # runs light image optimization

# Option 3
./ghost-updater.sh -o webp # optimizes and converts images to WebP, max performance</code></pre><figcaption><p><span style="white-space: pre-wrap;">Run the script. Option 3 is recommended</span></p></figcaption></figure><h2 id="image-optimization">Image Optimization</h2><p></p><p>This script can be ran with flags to optimize the images on your site improving performance. Running <code>./ghost-updater.sh -o</code> will lightly optimize all the images on your site while retaining the current file types. Adding the flag <code>./ghost-updater.sh -o webp</code> will recursively convert every image on your site to <code>.webp</code>. This is a more browser optimized file type that should make your site run significantly faster at the expense of a slight dip in quality. The caveat of this is that it runs every single time you push an update so as to not permanently alter the source files. This makes any changes you make here fully reversible at the expense of update time.</p><h2 id="conclusion">Conclusion</h2><p></p><p>If all of this went successfully, you should have many files in your Github repo now. To set up Github pages, go to the Github pages tab in settings and select the master branch and <code>/docs</code> as your root folder. You can set up a custom domain here as well. Just make sure it is the one you have been using in these scripts.</p><p>If your page is bugged out and only showing HTML elements and no CSS or Javascript, you likely put the wrong domain in the script above. If you don&apos;t have a custom domain, the default should be <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ&amp;ref=10.0.0.222">https://github-username.github.io/</a>. If all of this has worked up till now, congratulations, you&apos;re done! I hope this guide helped get you to that point.  </p>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://home.cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item><item><title><![CDATA[Single Part Raspberry Pi Compute Cluster]]></title><description><![CDATA[This is a Raspberry Pi cluster that I created where all of the Raspberry Pi's and networking gear can click into a single 3D printed component without the use of any fasteners.]]></description><link>https://cadenkraft.com/creating-a-single-part-tool-less/</link><guid isPermaLink="false">65d922ddf6e40400010656ff</guid><category><![CDATA[Coding]]></category><category><![CDATA[Build]]></category><dc:creator><![CDATA[Caden Kraft]]></dc:creator><pubDate>Tue, 13 Apr 2021 17:09:00 GMT</pubDate><media:content url="https://cadenkraft.com/content/images/2023/07/rpi-cluster.11.avif" medium="image"/><content:encoded><![CDATA[<img src="https://cadenkraft.com/content/images/2023/07/rpi-cluster.11.avif" alt="Single Part Raspberry Pi Compute Cluster"><p>My Raspberry Pi&apos;s are some of my favorite devices that I own. Their versatility cost and ease of use have allowed me to implement them into a wide range of projects and learn a lot about computing.</p><p>One area I had never ventured however was the idea of clustered computing. Making a compute cluster out of Raspberry Pi&apos;s had always seemed like a popular project that people do but I personally had never seen a use for one.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/02/image-14.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="960" height="640" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/image-14.avif 600w, https://cadenkraft.com/content/images/2022/02/image-14.avif 960w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Oracle Raspberry Pi Compute Cluster</span></figcaption></figure><p>However, after watching some videos by <a href="https://www.youtube.com/channel/UCR-DXc1voovS8nhAvccRZhg?ref=10.0.0.222">Jeff Geerling</a> I was interested. Luckily enough I just so happened to have 4 Raspberry Pi 3b+&apos;s that currently had no use. After doing some research the consensus came to be that Pi 4&apos;s are recommended for making clusters and 3&apos;s might be a bit slow but I&apos;m mostly doing it as a learning experience as opposed to a necessity.</p><p>Looking at the designs people have made previously for Raspberry Pi clusters I was disappointed to see that the actual mechanical design of the enclosures/lack-thereof was quite lacking in my opinion so I wanted to make my own. I tasked myself with designing a new enclosure satisfying these requirements.</p><ul><li>Tool-less install of the Raspberry Pi&apos;s</li><li>Streamlined power delivery (No big micro-USB cables)</li><li>3D printable with as few parts as possible</li><li>Integrated network switch and active cooling</li></ul><p>Here is the final design that I came up with. The view below is draggable to see the full model.</p>
<!--kg-card-begin: html-->
<div style="max-width: 1912px; max-height: 1230px;">
  <div style="left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 64.3305%; overflow: hidden;">
    <iframe src="https://cadenkraft.com/content/renders/rpi%20cluster%20render.3.html" allowfullscreen style="position: absolute; top: 0px; left: 0px; height: 100%; width: 1px; min-width: 100%; *width: 100%;" frameborder="0" scrolling="no">
    </iframe>
  </div>
</div>
<!--kg-card-end: html-->
<p>The center black component is designed to be 3D printed without supports with integrated tool-less clips to firmly hold all of the Raspberry Pi&apos;s without any hardware. The panels around the 3D printed part are designed to be laser cut out of 3mm acrylic and provide mounting for the fans and power delivery components. </p><p>One of the things I was worried about in having such a confined enclosure for the Raspberry Pi&apos;s was the port accessibility if I ever needed to use the HDMI ports for some reason. That is why I implemented the slots into the sides of the design. Not only do they aesthetically look cool if you side the acrylic panel out the back of the part they are perfectly lined up with the ports on the side of all the Raspberry Pi&apos;s so if needed I can still use those ports without having to ever take out any of RPI&apos;s.</p><p>On that note, some may notice that the traditional way that the Pi&apos;s receive power, the micro USB port on the side of the PCB, would be completely inaccessible in its current state. One solution that many have used online is to power the Raspberry Pi&apos;s through the 5v GPIO headers as they can actually take a power input. While this would work and would be pretty easy to implement, one of the downfalls of powering the Pi&apos;s directly from the 5v line is that your input voltage does not go through any of the filtering or reverse polarity protection that it would when powering over USB.</p><p>As I don&apos;t trust myself enough to risk 4 Raspberry Pi&apos;s at once I needed a better solution. After doing some research and probing with my multimeter I concluded that there are actually a couple of pads on the PCB below the USB port for 5v and GND.  These are where the USB port actually connects to the PCB so you still retain the filtering and protection.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/02/image-15.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="640" height="417" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/image-15.avif 600w, https://cadenkraft.com/content/images/2022/02/image-15.avif 640w"><figcaption><span style="white-space: pre-wrap;">5V pads in red, GND in black</span></figcaption></figure><p>Although soldering directly to Pi&apos;s seems like a much more drastic measure to take I thought that it was worth the risk and that it was the solution that I ended up going with.</p><p>Next, I needed to tackle the cooling. Admittedly, this is where I went a bit overkill. I initially wanted to use the <em>NF-A4x20 PWM </em>fans by Noctua.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://www.amazon.com/Noctua-NF-A4x20-PWM-Premium-Quality-Quiet/dp/B071W93333?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Amazon.com: Noctua NF-A4x20 PWM, Premium Quiet Fan, 4-Pin (40x20mm, Brown) : Electronics</div><div class="kg-bookmark-description">Buy Noctua NF-A4x20 PWM, Premium Quiet Fan, 4-Pin (40x20mm, Brown): Case Fans - Amazon.com &#x2713; FREE DELIVERY possible on eligible purchases</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://www.amazon.com/favicon.ico" alt="Single Part Raspberry Pi Compute Cluster"><span class="kg-bookmark-author">Brand Noctua</span><span class="kg-bookmark-publisher">Hardware Canucks</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://fls-na.amazon.com/1/batch/1/OP/ATVPDKIKX0DER:131-1497628-5249452:A1AJNEYGNB5H8ADYTEGZ$uedata=s:%2Frd%2Fuedata%3Fstaticb%26id%3DA1AJNEYGNB5H8ADYTEGZ%26pty%3DError%26spty%3DPageNotFound%26pti%3D:1000" alt="Single Part Raspberry Pi Compute Cluster"></div></a></figure><p>However, at almost $15 each, $30 for cooling 4 $30 computers just didn&apos;t really make a lot of sense. Then I came up with a different idea. As the length of the network switch afforded me extra room between the Pi&apos;s and the back of the cluster, the fans that I chose could be quite thick. This led me to pick 40mm server fans to use in the design.</p><figure class="kg-card kg-image-card"><img src="https://cadenkraft.com/content/images/2022/02/image-16.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="456" height="450"></figure><p>After they arrived I was disappointed to find out that the reviews of the fans being unbearably loud were true after some preliminary testing. However, they did push an unimaginable amount of air for their size so I decided to come up with a solution to tackle the noise. </p><p>My first idea was to hook up the PWM headers on the fans to the extra GPIO headers on one of the Raspberry Pi&apos;s and control it through temperature but that quickly became too far out of my element and probably out of the scope of the project. I decided to do the fan control the old-fashioned way by manually adjusting the voltage of the fans. To accomplish this I used a LM2596 Buck converter to limit the input voltage to the fans thus limiting the noise.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/02/image-20.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="600" height="600" srcset="https://cadenkraft.com/content/images/2022/02/image-20.avif 600w"><figcaption><span style="white-space: pre-wrap;">LM2596 DC-DC Buck Converter</span></figcaption></figure><p>After some testing, I concluded that the optimum level for the fan speed was setting them to just 3 volts! Normally I would think that the fans wouldn&apos;t even be capable of spinning 9 volts under their rating but not only did they spin, when they were mounted into the enclosure I could feel a steady stream of airflow even through the USB ports.</p><p><strong>Putting everything together</strong></p><p>Now that all the systems have been explained it&apos;s finally time to show off what it looks like put together. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/02/view1.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="2000" height="1500" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/view1.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/02/view1.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/02/view1.avif 1600w, https://cadenkraft.com/content/images/2022/02/view1.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">View of the front with all of the Raspberry Pi&apos;s connected</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/02/view2.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="2000" height="1500" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/view2.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/02/view2.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/02/view2.avif 1600w, https://cadenkraft.com/content/images/2022/02/view2.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">All of the Pi&apos;s powered and working</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2022/02/view3.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="2000" height="1500" srcset="https://cadenkraft.com/content/images/size/w600/2022/02/view3.avif 600w, https://cadenkraft.com/content/images/size/w1000/2022/02/view3.avif 1000w, https://cadenkraft.com/content/images/size/w1600/2022/02/view3.avif 1600w, https://cadenkraft.com/content/images/2022/02/view3.avif 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Back wiring and fan controller</span></figcaption></figure><p>As seen in these photos there were some things added that I forgot to mention including the fan filters and power switch etc. Overall I think it came out really well and surprisingly accurate to my original CAD model.</p><p><strong>So what do I actually use it for?</strong></p><p>This is the main question that people are asked when you make these types of cluster projects is what people actually use them for. And to be perfectly honest there isn&apos;t really much you can do that you can&apos;t do on any normal server. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cadenkraft.com/content/images/2024/03/pihole-logo.avif" class="kg-image" alt="Single Part Raspberry Pi Compute Cluster" loading="lazy" width="512" height="512"><figcaption><span style="white-space: pre-wrap;">PiHole Logo</span></figcaption></figure><p>That being said, it was a really good learning experience and I am currently using my cluster to host a local PiHole adblocking instance and even the local version of this blog. All of the Raspberry Pi&apos;s are installed with Raspberry Pi OS running k3s, a stripped-down lightweight version of Kubernetes.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://k3s.io/?ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">K3s: Lightweight Kubernetes</div><div class="kg-bookmark-description"></div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://k3s.io/favicon.ico" alt="Single Part Raspberry Pi Compute Cluster"></div></div><div class="kg-bookmark-thumbnail"><img src="https://k3s.io/images/logo-k3s.svg" alt="Single Part Raspberry Pi Compute Cluster"></div></a></figure><p>If you are interested in information to set up the software side of things, that is a bit outside the scope of what I can explain through the medium of this post, but linked below is an excellent video series by Jeff Geerling that I used as a basis to build my cluster off of.  </p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://www.youtube.com/watch?v=kgVz4-SEhbE&amp;list=PL2_OBreMn7Frk57NLmLheAaSSpJLLL90G&amp;ref=10.0.0.222"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Raspberry Pi Cluster Ep 1 - Introduction to Clustering</div><div class="kg-bookmark-description">In this video, I introduce the concept of Raspberry Pi clustering, and cluster computing in general. Technology like Beowulf clusters and Kubernetes has made...</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://www.youtube.com/s/desktop/ecd7151d/img/favicon_144x144.avif" alt="Single Part Raspberry Pi Compute Cluster"><span class="kg-bookmark-author">YouTube</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://i.ytimg.com/vi/kgVz4-SEhbE/maxresdefault.avif" alt="Single Part Raspberry Pi Compute Cluster"></div></a></figure><p>This is a great guide for someone interested in setting up their own cluster from start to finish and I would highly recommend it.</p><p><strong>Resources for building your own cluster</strong></p><p>Here I am going to go over the basic steps and requirements for building your own cluster off of the design showcased above.</p><p><strong>Requirements:</strong></p><ul><li>x4 Raspberry Pi (2-3b+)</li><li>x1 TpLink TL-SG105 Gigabit Network Switch</li><li>x2 Sunon 40mm GM1204PQV1 fan</li><li>x1 5v 5A Barrel jack power supply and female plug</li><li>x1 Toggle Switch</li><li>x1 LM2596 Buck Converter </li><li>x4 6in Ethernet Cables</li><li>x4 8gb+ MicroSD Cards</li><li>x1 3-Way Screw Terminal </li><li>x10 10mm M3 screws</li><li>x8 25mm M3 screws</li><li>x4 M3 Nuts</li><li>Wire</li><li>3D printer</li><li>Laser cutter if you want to be fancy </li><li>Lots of patience</li></ul><p>Below are the files that are needed to create this design. The assembly should be pretty self-explanatory just know that the 10mm M3 screws hold the panels to the 3D printed part while the 25mm ones and the nuts hold the fans. I have also included the files for the panels in DXF and STL formats if you do not have the means to laser cut them. The design should work just the same with them printed.</p><hr><div class="kg-card kg-file-card"><a class="kg-file-card-container" href="https://cadenkraft.com/content/files/2022/02/main_body.stl" title="Download" download><div class="kg-file-card-contents"><div class="kg-file-card-title">Main body</div><div class="kg-file-card-caption">Main 3D printed part to the cluster assembly</div><div class="kg-file-card-metadata"><div class="kg-file-card-filename">main_body.stl</div><div class="kg-file-card-filesize">2 MB</div></div></div><div class="kg-file-card-icon"><svg viewbox="0 0 24 24"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>download-circle</title><polyline class="a" points="8.25 14.25 12 18 15.75 14.25"/><line class="a" x1="12" y1="6.75" x2="12" y2="18"/><circle class="a" cx="12" cy="12" r="11.25"/></svg></div></a></div><div class="kg-card kg-file-card"><a class="kg-file-card-container" href="https://cadenkraft.com/content/files/2022/02/panels.zip" title="Download" download><div class="kg-file-card-contents"><div class="kg-file-card-title">Panels</div><div class="kg-file-card-caption">Optional files for all of the panels around the cluster</div><div class="kg-file-card-metadata"><div class="kg-file-card-filename">panels.zip</div><div class="kg-file-card-filesize">110 KB</div></div></div><div class="kg-file-card-icon"><svg viewbox="0 0 24 24"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>download-circle</title><polyline class="a" points="8.25 14.25 12 18 15.75 14.25"/><line class="a" x1="12" y1="6.75" x2="12" y2="18"/><circle class="a" cx="12" cy="12" r="11.25"/></svg></div></a></div>
<!--kg-card-begin: html-->
<script src="https://giscus.app/client.js" data-repo="ckraft11/ghost-blog" data-repo-id="R_kgDOG48_8w" data-category="General" data-category-id="DIC_kwDOG48_884CbtkV" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="https://cadenkraft.com/no-border-light-ghost.css" data-lang="en" crossorigin="anonymous" async>
</script>
<!--kg-card-end: html-->
]]></content:encoded></item></channel></rss>